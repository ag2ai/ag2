---
title: Perplexity Search Tool
---

The Perplexity AI Search integration in AG2 allows users to perform real-time web searches within the AG2 framework. It uses advanced language models and real-time web search capabilities to provide users with up-to-date information and answers to their queries.

This section outlines how to integrate Perplexity Search with AG2 Agents and additional tools.


## Configuring Your Perplexity API Key

1. Create a Perplexity Account:
   - [Go to Perplexity API Page](https://sonar.perplexity.ai/)
   - Click `Get Started` and create an account.
   - Follow to steps and chose Free Tier when proposed.
2. Get a Perplexity API Key:
   - Go to [API Section](https://www.perplexity.ai/settings/api) after you create your account.
   - Set up a payment method (you need to set up a payment method to create an API key).
   - Navigate to **Settings > API**, search for **API Keys**, click on **Generate** and copy it.
3. Export Perplexity API Key:
    ```bash
    export PERPLEXITY_API_KEY="your_api_key"
    ```


## Installation

To get started with the `Perplexity Search` integration in AG2, follow these steps:

Install AG2 with the `perplexity-search` and `openai` extras:

```bash
pip install -U ag2[openai,perplexity-search]
```
> **Note:** If you have been using `autogen` or `pyautogen`, all you need to do is upgrade it using:
> ```bash
> pip install -U ag2[openai,perplexity-search]
> ```
> or
> ```bash
> pip install -U ag2[openai,perplexity-search]
> ```
> as `pyautogen`, `autogen`, and `ag2` are aliases for the same PyPI package.


You're all set! Now you can start using Perplexity AI Search with AG2.

## Imports

```python
import os

import autogen
from autogen import AssistantAgent, UserProxyAgent
from autogen.tools.experimental import PerplexitySearchTool
```

## Using Perplexity Search Tool with Agents

The `PerplexitySearchTool` enables agents to perform real time AI Powered web search.

### Agent Configuration

```python
config_list = autogen.config_list_from_json(
    env_or_file="OAI_CONFIG_LIST",
    filter_dict={
        "model": ["gpt-4o-mini"],
    },
)

assistant = AssistantAgent(
    name="assistant",
    llm_config={"config_list": config_list},
)

user_proxy = UserProxyAgent(
    name="user_proxy",
    llm_config={"config_list": config_list},
    human_input_mode="NEVER"
)

```

### Tool Initialization

```python
api_key = os.getenv("PERPLEXITY_API_KEY")

perplexity_search_tool = PerplexitySearchTool(api_key=api_key, max_tokens=1000)

# Once initialized, register the tool for LLM recommendation and execution
perplexity_search_tool.register_for_llm(assistant)
perplexity_search_tool.register_for_execution(user_proxy)
```

### Start the Conversation

With the setup complete, you can now use the assistant to fetch live web search results.

```python
result = user_proxy.initiate_chat(
    recipient=assistant,
    message="What is AG2?",
    max_turns=2,
)

````

### Output

```console
user_proxy (to assistant):

What is AG2?

--------------------------------------------------------------------------------
assistant (to user_proxy):

***** Suggested tool call (call_kOW9AP9YmrCJbxhnnqiNjXVz): perplexity-search *****
Arguments:
{"query":"What is AG2?"}
**********************************************************************************

--------------------------------------------------------------------------------

>>>>>>>> EXECUTING FUNCTION perplexity-search...
Call ID: call_kOW9AP9YmrCJbxhnnqiNjXVz
Input arguments: {'query': 'What is AG2?'}
user_proxy (to assistant):

***** Response from calling tool (call_kOW9AP9YmrCJbxhnnqiNjXVz) *****
{"content":"AG2 is an open-source framework for building AI-powered agents, originally a community-driven fork of the AutoGen project. It is led by Dr. Chi Wang of Google DeepMind and Dr. Qingyun Wu of Penn State University. AG2 focuses on **multi-agent systems**, enabling autonomous agents to collaborate and solve complex problems across various domains such as education, enterprise workflows, and healthcare[1][3][5]. It provides tools for enhanced Large Language Model (LLM) inference and optimization, facilitating the creation of diverse applications[3][4].","citations":["https://www.forwardfuture.ai/p/agents-in-action-the-rise-of-ag2-and-the-future-of-intelligent-agents","https://www.youtube.com/watch?v=UItthyY71UU","https://docs.ag2.ai/docs/home/home","https://ag2ai.github.io/ag2/latest/docs/home/home/","https://cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/develop/ag2","https://atmosphericg2.com/homepage/products/ag2data/","https://atmosphericg2.com/ag2trader/"]}
**********************************************************************

--------------------------------------------------------------------------------
assistant (to user_proxy):

AG2 is an open-source framework for building AI-powered agents, initially a community-driven fork of the AutoGen project. It is led by researchers Dr. Chi Wang of Google DeepMind and Dr. Qingyun Wu of Penn State University. AG2 emphasizes **multi-agent systems**, allowing autonomous agents to collaborate and tackle complex problems in various fields, including education, enterprise workflows, and healthcare.

The framework provides tools for improved Large Language Model (LLM) inference and optimization, facilitating the development of diverse applications.

For more detailed information, you can explore the following resources:
- [Forward Future Article](https://www.forwardfuture.ai/p/agents-in-action-the-rise-of-ag2-and-the-future-of-intelligent-agents)
- [Official Documentation](https://docs.ag2.ai/docs/home/home)

TERMINATE

--------------------------------------------------------------------------------

>>>>>>>> TERMINATING RUN (2ab104c4-cfe6-4ce7-88e3-fb83b9623a7a): Maximum turns (2) reached

Process finished with exit code 0
````
