<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=https://docs.ag2.ai/latest/docs/blog/ rel=canonical><link href=../community-talks/2025-04-10-NOVA/ rel=prev><link href=category/a2a/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>Blog - AG2</title><link rel=stylesheet href=../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../stylesheets/extra.ff0633.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - Blog"><meta property=og:description content="A programming framework for agentic AI"><meta content=https://docs.ag2.ai/latest/docs/blog/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - Blog"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon-dark.svg type=image/x-icon media="(prefers-color-scheme: light)"><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon media="(prefers-color-scheme: dark)"><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#blog class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Blog </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../quick-start/ class=md-tabs__link> Quick Start </a> </li> <li class=md-tabs__item> <a href=../user-guide/basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../api-reference/autogen/Agent/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> <li class=md-tabs__item> <a href=../use-cases/use-cases/customer-service/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-tabs__link> Community Insights </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../user-guide/basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../api-reference/autogen/Agent/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../use-cases/use-cases/customer-service/ class=md-nav__link> <span class=md-ellipsis> Use Cases </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-nav__link> <span class=md-ellipsis> Community Insights </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8 checked> <div class="md-nav__link md-nav__container"> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Blog </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_8 id=__nav_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=true> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=archive/2026/ class=md-nav__link> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=category/a2a/ class=md-nav__link> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#give-your-ag2-agent-its-own-ui-with-ag-ui class=md-nav__link> <span class=md-ellipsis> Give Your AG2 Agent its own UI with AG-UI </span> </a> </li> <li class=md-nav__item> <a href=#ag2-opentelemetry-tracing-full-observability-for-multi-agent-systems class=md-nav__link> <span class=md-ellipsis> AG2 OpenTelemetry Tracing: Full Observability for Multi-Agent Systems </span> </a> </li> <li class=md-nav__item> <a href=#ag2-gemini-thinking-configuration-enhanced-reasoning-control-with-thinkingconfig class=md-nav__link> <span class=md-ellipsis> AG2 Gemini Thinking Configuration: Enhanced Reasoning Control with ThinkingConfig </span> </a> </li> <li class=md-nav__item> <a href=#ag2-multi-mcp-session-management-dynamic-server-connections-with-mcpclientsessionmanager class=md-nav__link> <span class=md-ellipsis> AG2 Multi-MCP Session Management: Dynamic Server Connections with MCPClientSessionManager </span> </a> </li> <li class=md-nav__item> <a href=#ag2-shell-tool-integration-command-execution-and-multi-tool-devops-orchestration class=md-nav__link> <span class=md-ellipsis> AG2 Shell Tool Integration: Command Execution and Multi-Tool DevOps Orchestration </span> </a> </li> <li class=md-nav__item> <a href=#ag2-event-logging-standardized-observability-with-python-logging class=md-nav__link> <span class=md-ellipsis> AG2 Event Logging: Standardized Observability with Python Logging </span> </a> </li> <li class=md-nav__item> <a href=#gpt-51-apply-patch-tool-automated-code-editing-in-ag2 class=md-nav__link> <span class=md-ellipsis> GPT-5.1 Apply Patch Tool: Automated Code Editing in AG2 </span> </a> </li> <li class=md-nav__item> <a href=#a2a-protocol-support-in-ag2-v010 class=md-nav__link> <span class=md-ellipsis> A2A Protocol Support in AG2 v0.10 </span> </a> </li> <li class=md-nav__item> <a href=#cascadia-ai-hackathon-winner-dino-park-meets-ag2 class=md-nav__link> <span class=md-ellipsis> Cascadia AI Hackathon Winner: Dino Park Meets AG2 </span> </a> </li> <li class=md-nav__item> <a href=#from-reasoning-to-evaluation-advanced-react-loops class=md-nav__link> <span class=md-ellipsis> From Reasoning to Evaluation: Advanced ReAct Loops </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <div class=md-content__inner> <header class=md-typeset> <h1 id=blog>Blog<a class=headerlink href=#blog title="Permanent link">#</a></h1> </header> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/marklysze.png alt="Mark Sze"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2026-02-17 00:00:00+00:00">February 17, 2026</time></li> <li class=md-meta__item> in <a href=category/ag-ui/ class=md-meta__link>AG-UI</a>, <a href=category/frontend/ class=md-meta__link>Frontend</a>, <a href=category/streaming/ class=md-meta__link>Streaming</a>, <a href=category/tools/ class=md-meta__link>Tools</a></li> <li class=md-meta__item> 11 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=give-your-ag2-agent-its-own-ui-with-ag-ui><a href=2026/02/17/AG2-AG-UI-Protocol/ class=toclink>Give Your AG2 Agent its own UI with AG-UI</a></h2> <p><img alt="AG2 x AG-UI" src=2026-02-17-AG2-AG-UI-Protocol/img/ag2-ag-ui.webp></p> <p>You've built an agent with AG2. It reasons, calls tools, and streams responses. But right now it lives in a terminal or a script. The moment you want to put it in front of a user (like for a blog, perhaps) and stream text token by token, show tool activity as it happens, and handle errors gracefully you're building custom plumbing: WebSocket handlers, bespoke JSON formats, state synchronization logic.</p> <p><a href=https://docs.ag-ui.com/introduction>AG-UI</a> (Agent-User Interaction Protocol) is an open, lightweight, event-based protocol that standardizes this agent-to-UI layer. AG2 now supports AG-UI natively, meaning you can connect any <code>ConversableAgent</code> to an AG-UI-compatible frontend with just a couple of lines of code.</p> <p>In this post, we'll look under the hood at how the protocol works by building a working agent chat application from scratch using a <code>ConversableAgent</code> with a weather tool, sending AG-UI events to a browser frontend that renders streaming text and an interactive tool card. Simple HTML, no frontend framework required.</p> <p><img alt="AG2 Agent Chat powered by AG-UI" src=2026-02-17-AG2-AG-UI-Protocol/img/ag2-ag-ui-demo.gif></p> <h3 id=what-is-ag-ui><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#what-is-ag-ui>What is AG-UI?</a></h3> <p>AG-UI is an open protocol created by <a href=https://www.copilotkit.ai/ >CopilotKit</a> that defines how AI agents communicate with frontend applications. Rather than each framework inventing its own streaming format, AG-UI provides a standard set of event types that any agent backend can emit and any frontend can consume.</p> <p>The protocol uses <strong>Server-Sent Events (SSE)</strong> over HTTP where each event is a JSON object with a <code>type</code> field that tells the frontend what's happening:</p> <ul> <li><strong>Lifecycle events</strong> -- <code>RUN_STARTED</code>, <code>RUN_FINISHED</code>, <code>RUN_ERROR</code> -- signal when the agent begins and ends work</li> <li><strong>Text message events</strong> -- <code>TEXT_MESSAGE_START</code>, <code>TEXT_MESSAGE_CONTENT</code>, <code>TEXT_MESSAGE_END</code> -- stream text token by token</li> <li><strong>Tool call events</strong> -- <code>TOOL_CALL_START</code>, <code>TOOL_CALL_ARGS</code>, <code>TOOL_CALL_RESULT</code>, <code>TOOL_CALL_END</code> -- report tool activity in real time</li> <li><strong>State events</strong> -- <code>STATE_SNAPSHOT</code>, <code>STATE_DELTA</code> -- synchronize shared state between backend and frontend</li> </ul> <p>This event-driven approach means the frontend can react to each event as it arrives: render text as it streams, show a loading card when a tool starts, populate it with results when the tool finishes, and display errors immediately if something goes wrong.</p> <p>For a deep dive into the protocol, see the <a href=https://docs.ag-ui.com/introduction>AG-UI documentation</a>.</p> <h3 id=the-backend-three-lines-to-an-ag-ui-endpoint><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#the-backend-three-lines-to-an-ag-ui-endpoint>The Backend: Three Lines to an AG-UI Endpoint</a></h3> <p>AG2's AG-UI integration centers on one class: <code>AGUIStream</code>. It wraps a <code>ConversableAgent</code> and translates its behavior (text responses, tool calls, context updates, errors) into the AG-UI event stream.</p> <p>Let's build a weather agent. First, install AG2 with the AG-UI extra, plus <code>fastapi</code> and <code>uvicorn</code> for the web server, <code>httpx</code> for the weather API calls, and <code>python-dotenv</code> for loading your API key from a <code>.env</code> file:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span><span class=s2>"ag2[openai,ag-ui]"</span><span class=w> </span>fastapi<span class=w> </span>uvicorn<span class=w> </span>httpx<span class=w> </span>python-dotenv
</code></pre></div> <p>Here's the complete backend:</p> <div class=highlight><span class=filename>backend.py</span><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>from</span><span class=w> </span><span class=nn>__future__</span><span class=w> </span><span class=kn>import</span> <span class=n>annotations</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Annotated</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=kn>import</span><span class=w> </span><span class=nn>httpx</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=kn>from</span><span class=w> </span><span class=nn>fastapi</span><span class=w> </span><span class=kn>import</span> <span class=n>FastAPI</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=kn>from</span><span class=w> </span><span class=nn>fastapi.responses</span><span class=w> </span><span class=kn>import</span> <span class=n>FileResponse</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen</span><span class=w> </span><span class=kn>import</span> <span class=n>ConversableAgent</span><span class=p>,</span> <span class=n>LLMConfig</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.ag_ui</span><span class=w> </span><span class=kn>import</span> <span class=n>AGUIStream</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=kn>from</span><span class=w> </span><span class=nn>dotenv</span><span class=w> </span><span class=kn>import</span> <span class=n>load_dotenv</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=n>load_dotenv</span><span class=p>()</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=c1># A regular AG2 tool -- nothing AG-UI-specific here.</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=c1># The type annotations and docstring become the tool schema for the LLM.</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>get_weather</span><span class=p>(</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>    <span class=n>location</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>"City name to get weather for"</span><span class=p>],</span>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span> <span class=o>|</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=w>    </span><span class=sd>"""Get current weather for a location using the Open-Meteo API."""</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>    <span class=k>async</span> <span class=k>with</span> <span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span><span class=p>()</span> <span class=k>as</span> <span class=n>client</span><span class=p>:</span>
<a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>        <span class=n>geocoding_url</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a>            <span class=sa>f</span><span class=s2>"https://geocoding-api.open-meteo.com/v1/search"</span>
<a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a>            <span class=sa>f</span><span class=s2>"?name=</span><span class=si>{</span><span class=n>location</span><span class=si>}</span><span class=s2>&amp;count=1"</span>
<a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>        <span class=p>)</span>
<a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a>        <span class=n>geo</span> <span class=o>=</span> <span class=p>(</span><span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>geocoding_url</span><span class=p>))</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
<a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a>
<a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>geo</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"results"</span><span class=p>):</span>
<a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a>            <span class=k>return</span> <span class=p>{</span><span class=s2>"error"</span><span class=p>:</span> <span class=sa>f</span><span class=s2>"Location '</span><span class=si>{</span><span class=n>location</span><span class=si>}</span><span class=s2>' not found"</span><span class=p>}</span>
<a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a>
<a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>geo</span><span class=p>[</span><span class=s2>"results"</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>
<a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a>        <span class=n>lat</span><span class=p>,</span> <span class=n>lon</span><span class=p>,</span> <span class=n>name</span> <span class=o>=</span> <span class=n>result</span><span class=p>[</span><span class=s2>"latitude"</span><span class=p>],</span> <span class=n>result</span><span class=p>[</span><span class=s2>"longitude"</span><span class=p>],</span> <span class=n>result</span><span class=p>[</span><span class=s2>"name"</span><span class=p>]</span>
<a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a>
<a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a>        <span class=n>weather_url</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a>            <span class=sa>f</span><span class=s2>"https://api.open-meteo.com/v1/forecast?"</span>
<a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a>            <span class=sa>f</span><span class=s2>"latitude=</span><span class=si>{</span><span class=n>lat</span><span class=si>}</span><span class=s2>&amp;longitude=</span><span class=si>{</span><span class=n>lon</span><span class=si>}</span><span class=s2>"</span>
<a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a>            <span class=sa>f</span><span class=s2>"&amp;current=temperature_2m,apparent_temperature,"</span>
<a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a>            <span class=sa>f</span><span class=s2>"relative_humidity_2m,wind_speed_10m,weather_code"</span>
<a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a>        <span class=p>)</span>
<a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a>        <span class=n>current</span> <span class=o>=</span> <span class=p>(</span><span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>weather_url</span><span class=p>))</span><span class=o>.</span><span class=n>json</span><span class=p>()[</span><span class=s2>"current"</span><span class=p>]</span>
<a id=__codelineno-1-41 name=__codelineno-1-41 href=#__codelineno-1-41></a>
<a id=__codelineno-1-42 name=__codelineno-1-42 href=#__codelineno-1-42></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-1-43 name=__codelineno-1-43 href=#__codelineno-1-43></a>            <span class=s2>"temperature"</span><span class=p>:</span> <span class=n>current</span><span class=p>[</span><span class=s2>"temperature_2m"</span><span class=p>],</span>
<a id=__codelineno-1-44 name=__codelineno-1-44 href=#__codelineno-1-44></a>            <span class=s2>"feelsLike"</span><span class=p>:</span> <span class=n>current</span><span class=p>[</span><span class=s2>"apparent_temperature"</span><span class=p>],</span>
<a id=__codelineno-1-45 name=__codelineno-1-45 href=#__codelineno-1-45></a>            <span class=s2>"humidity"</span><span class=p>:</span> <span class=n>current</span><span class=p>[</span><span class=s2>"relative_humidity_2m"</span><span class=p>],</span>
<a id=__codelineno-1-46 name=__codelineno-1-46 href=#__codelineno-1-46></a>            <span class=s2>"windSpeed"</span><span class=p>:</span> <span class=n>current</span><span class=p>[</span><span class=s2>"wind_speed_10m"</span><span class=p>],</span>
<a id=__codelineno-1-47 name=__codelineno-1-47 href=#__codelineno-1-47></a>            <span class=s2>"conditions"</span><span class=p>:</span> <span class=n>current</span><span class=p>[</span><span class=s2>"weather_code"</span><span class=p>],</span>
<a id=__codelineno-1-48 name=__codelineno-1-48 href=#__codelineno-1-48></a>            <span class=s2>"location"</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span>
<a id=__codelineno-1-49 name=__codelineno-1-49 href=#__codelineno-1-49></a>        <span class=p>}</span>
<a id=__codelineno-1-50 name=__codelineno-1-50 href=#__codelineno-1-50></a>
<a id=__codelineno-1-51 name=__codelineno-1-51 href=#__codelineno-1-51></a><span class=c1># Create a ConversableAgent exactly as you normally would.</span>
<a id=__codelineno-1-52 name=__codelineno-1-52 href=#__codelineno-1-52></a><span class=c1># Include stream=True in LLMConfig so the UI can stream out</span>
<a id=__codelineno-1-53 name=__codelineno-1-53 href=#__codelineno-1-53></a><span class=c1># your agent's response.</span>
<a id=__codelineno-1-54 name=__codelineno-1-54 href=#__codelineno-1-54></a><span class=n>agent</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-1-55 name=__codelineno-1-55 href=#__codelineno-1-55></a>    <span class=n>name</span><span class=o>=</span><span class=s2>"weather_agent"</span><span class=p>,</span>
<a id=__codelineno-1-56 name=__codelineno-1-56 href=#__codelineno-1-56></a>    <span class=n>system_message</span><span class=o>=</span><span class=p>(</span>
<a id=__codelineno-1-57 name=__codelineno-1-57 href=#__codelineno-1-57></a>        <span class=s2>"You are a helpful weather assistant. Use the get_weather tool "</span>
<a id=__codelineno-1-58 name=__codelineno-1-58 href=#__codelineno-1-58></a>        <span class=s2>"to look up current conditions for any city."</span>
<a id=__codelineno-1-59 name=__codelineno-1-59 href=#__codelineno-1-59></a>    <span class=p>),</span>
<a id=__codelineno-1-60 name=__codelineno-1-60 href=#__codelineno-1-60></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>LLMConfig</span><span class=p>({</span><span class=s2>"model"</span><span class=p>:</span> <span class=s2>"gpt-4o-mini"</span><span class=p>,</span> <span class=s2>"stream"</span><span class=p>:</span> <span class=kc>True</span><span class=p>}),</span>
<a id=__codelineno-1-61 name=__codelineno-1-61 href=#__codelineno-1-61></a>    <span class=n>functions</span><span class=o>=</span><span class=p>[</span><span class=n>get_weather</span><span class=p>],</span>
<a id=__codelineno-1-62 name=__codelineno-1-62 href=#__codelineno-1-62></a><span class=p>)</span>
<a id=__codelineno-1-63 name=__codelineno-1-63 href=#__codelineno-1-63></a>
<a id=__codelineno-1-64 name=__codelineno-1-64 href=#__codelineno-1-64></a><span class=c1># --- AG-UI integration ---</span>
<a id=__codelineno-1-65 name=__codelineno-1-65 href=#__codelineno-1-65></a><span class=n>stream</span> <span class=o>=</span> <span class=n>AGUIStream</span><span class=p>(</span><span class=n>agent</span><span class=p>)</span> <span class=c1># (1) Wrap the agent</span>
<a id=__codelineno-1-66 name=__codelineno-1-66 href=#__codelineno-1-66></a>
<a id=__codelineno-1-67 name=__codelineno-1-67 href=#__codelineno-1-67></a><span class=c1># FastAPI, including CORS middleware for localhost access (not for production)</span>
<a id=__codelineno-1-68 name=__codelineno-1-68 href=#__codelineno-1-68></a><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>()</span>
<a id=__codelineno-1-69 name=__codelineno-1-69 href=#__codelineno-1-69></a><span class=n>app</span><span class=o>.</span><span class=n>add_middleware</span><span class=p>(</span>
<a id=__codelineno-1-70 name=__codelineno-1-70 href=#__codelineno-1-70></a>    <span class=n>CORSMiddleware</span><span class=p>,</span>
<a id=__codelineno-1-71 name=__codelineno-1-71 href=#__codelineno-1-71></a>    <span class=n>allow_origins</span><span class=o>=</span><span class=p>[</span><span class=s2>"*"</span><span class=p>],</span>
<a id=__codelineno-1-72 name=__codelineno-1-72 href=#__codelineno-1-72></a>    <span class=n>allow_methods</span><span class=o>=</span><span class=p>[</span><span class=s2>"*"</span><span class=p>],</span>
<a id=__codelineno-1-73 name=__codelineno-1-73 href=#__codelineno-1-73></a>    <span class=n>allow_headers</span><span class=o>=</span><span class=p>[</span><span class=s2>"*"</span><span class=p>],</span>
<a id=__codelineno-1-74 name=__codelineno-1-74 href=#__codelineno-1-74></a><span class=p>)</span>
<a id=__codelineno-1-75 name=__codelineno-1-75 href=#__codelineno-1-75></a>
<a id=__codelineno-1-76 name=__codelineno-1-76 href=#__codelineno-1-76></a><span class=n>app</span><span class=o>.</span><span class=n>mount</span><span class=p>(</span><span class=s2>"/chat"</span><span class=p>,</span> <span class=n>stream</span><span class=o>.</span><span class=n>build_asgi</span><span class=p>())</span> <span class=c1># (2) Mount as an ASGI endpoint</span>
<a id=__codelineno-1-77 name=__codelineno-1-77 href=#__codelineno-1-77></a>
<a id=__codelineno-1-78 name=__codelineno-1-78 href=#__codelineno-1-78></a><span class=c1># Serve the frontend at the root URL (for this demo only)</span>
<a id=__codelineno-1-79 name=__codelineno-1-79 href=#__codelineno-1-79></a><span class=nd>@app</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"/"</span><span class=p>)</span>
<a id=__codelineno-1-80 name=__codelineno-1-80 href=#__codelineno-1-80></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>serve_frontend</span><span class=p>():</span>
<a id=__codelineno-1-81 name=__codelineno-1-81 href=#__codelineno-1-81></a>    <span class=k>return</span> <span class=n>FileResponse</span><span class=p>(</span><span class=s2>"frontend.html"</span><span class=p>)</span>
<a id=__codelineno-1-82 name=__codelineno-1-82 href=#__codelineno-1-82></a>
<a id=__codelineno-1-83 name=__codelineno-1-83 href=#__codelineno-1-83></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>"__main__"</span><span class=p>:</span>
<a id=__codelineno-1-84 name=__codelineno-1-84 href=#__codelineno-1-84></a>    <span class=kn>import</span><span class=w> </span><span class=nn>uvicorn</span>
<a id=__codelineno-1-85 name=__codelineno-1-85 href=#__codelineno-1-85></a>    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=n>host</span><span class=o>=</span><span class=s2>"0.0.0.0"</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>8456</span><span class=p>)</span> <span class=c1># (3)</span>
</code></pre></div> <p>That's it. Line <strong>(1)</strong> wraps the agent in an <code>AGUIStream</code>. Line <strong>(2)</strong> mounts it as an ASGI endpoint. Line <strong>(3)</strong> runs the server. The <code>AGUIStream</code> handles all the event encoding internally, translating the agent's streaming text, tool calls, context variable changes, and errors into properly formatted AG-UI events.</p> <p>Run it with:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>python<span class=w> </span>backend.py
</code></pre></div> <p>Your agent is now serving AG-UI events at <code>http://localhost:8456/chat</code>.</p> <h3 id=what-flows-over-the-wire><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#what-flows-over-the-wire>What Flows Over the Wire</a></h3> <p>When a frontend sends a message to the <code>/chat</code> endpoint, it receives an SSE stream of JSON events. Here's what a typical weather query produces:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>data: {"type":"RUN_STARTED","timestamp":1771292585500,"threadId":"blog-capture","runId":"run-1"}
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>data: {"type":"TOOL_CALL_START","timestamp":1771292587080,"toolCallId":"call_YF2vCJvd4paLkHKtyK6DvZDH","toolCallName":"get_weather"}
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>data: {"type":"TOOL_CALL_ARGS","timestamp":1771292587080,"toolCallId":"call_YF2vCJvd4paLkHKtyK6DvZDH","delta":"{\"location\":\"Tokyo\"}"}
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>data: {"type":"TOOL_CALL_RESULT","timestamp":1771292589703,"messageId":"26a835e1-...","toolCallId":"call_YF2vCJvd4paLkHKtyK6DvZDH","content":"{'temperature': 4.6, 'feelsLike': 1.6, 'humidity': 68, 'windSpeed': 5.0, 'windGust': 19.8, 'conditions': 'Partly cloudy', 'location': 'Tokyo'}","role":"tool"}
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>data: {"type":"TOOL_CALL_END","timestamp":1771292589703,"toolCallId":"call_YF2vCJvd4paLkHKtyK6DvZDH"}
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>data: {"type":"TEXT_MESSAGE_START","timestamp":1771292590776,"messageId":"e550e431-...","role":"assistant"}
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>data: {"type":"TEXT_MESSAGE_CONTENT","timestamp":1771292590776,"messageId":"e550e431-...","delta":"Current"}
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>data: {"type":"TEXT_MESSAGE_CONTENT","timestamp":1771292590776,"messageId":"e550e431-...","delta":" weather"}
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>data: {"type":"TEXT_MESSAGE_CONTENT","timestamp":1771292590809,"messageId":"e550e431-...","delta":" in"}
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>data: {"type":"TEXT_MESSAGE_CONTENT","timestamp":1771292590809,"messageId":"e550e431-...","delta":" Tokyo"}
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>  ... (more TEXT_MESSAGE_CONTENT events, one per token) ...
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>data: {"type":"TEXT_MESSAGE_END","timestamp":1771292591288,"messageId":"e550e431-..."}
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>data: {"type":"RUN_FINISHED","timestamp":1771292591288,"threadId":"blog-capture","runId":"run-1"}
</code></pre></div> <p>Each event has a <code>type</code> that tells the frontend exactly what to do. The frontend doesn't need to understand AG2 internals as it just reacts to a standardized event stream.</p> <h3 id=the-frontend-consuming-ag-ui-events><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#the-frontend-consuming-ag-ui-events>The Frontend: Consuming AG-UI Events</a></h3> <p>To understand what AG-UI gives you, we'll consume the event stream directly using just <code>fetch</code> and a <code>switch</code> statement. This low-level approach allows you to see every event the protocol produces. (For production frontends with pre-built UI components, see <a href=2026/02/17/AG2-AG-UI-Protocol/#frontend-libraries>Frontend Libraries</a> below.)</p> <p>The frontend is a single HTML file, save it as <code>frontend.html</code> next to <code>backend.py</code>. It has minimal styling and an <strong>event log</strong> panel so you can see every AG-UI event as it arrives.</p> <p>The core pattern: POST a <code>RunAgentInput</code> payload, read the SSE stream line by line, parse each <code>data:</code> line as JSON, and <code>switch</code> on the event type.</p> <details> <summary>frontend.html â€” full source (click to expand)</summary> <div class=highlight><span class=filename>frontend.html</span><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=cp>&lt;!DOCTYPE html&gt;</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>"en"</span><span class=p>&gt;</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>"UTF-8"</span><span class=p>&gt;</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>AG2 + AG-UI Demo<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>        </span><span class=o>*</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>box-sizing</span><span class=p>:</span><span class=w> </span><span class=kc>border-box</span><span class=p>;</span><span class=w> </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>        </span><span class=nt>body</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>font-family</span><span class=p>:</span><span class=w> </span><span class=n>system-ui</span><span class=p>,</span><span class=w> </span><span class=kc>sans-serif</span><span class=p>;</span><span class=w> </span><span class=k>display</span><span class=p>:</span><span class=w> </span><span class=kc>flex</span><span class=p>;</span><span class=w> </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>vh</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>        </span><span class=c>/* Left: chat panel */</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>        </span><span class=p>.</span><span class=nc>chat</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>flex</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=k>display</span><span class=p>:</span><span class=w> </span><span class=kc>flex</span><span class=p>;</span><span class=w> </span><span class=k>flex-direction</span><span class=p>:</span><span class=w> </span><span class=kc>column</span><span class=p>;</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>16</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>        </span><span class=p>.</span><span class=nc>chat</span><span class=w> </span><span class=nt>h2</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>        </span><span class=p>.</span><span class=nc>messages</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>flex</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=k>overflow-y</span><span class=p>:</span><span class=w> </span><span class=kc>auto</span><span class=p>;</span><span class=w> </span><span class=k>border</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=kt>px</span><span class=w> </span><span class=kc>solid</span><span class=w> </span><span class=mh>#ddd</span><span class=p>;</span><span class=w> </span><span class=k>border-radius</span><span class=p>:</span><span class=w> </span><span class=mi>6</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>        </span><span class=p>.</span><span class=nc>msg</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>        </span><span class=p>.</span><span class=nc>msg</span><span class=p>.</span><span class=nc>user</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#1a73e8</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=w>        </span><span class=p>.</span><span class=nc>msg</span><span class=p>.</span><span class=nc>assistant</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#333</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>        </span><span class=p>.</span><span class=nc>msg</span><span class=p>.</span><span class=nc>tool</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#e67e22</span><span class=p>;</span><span class=w> </span><span class=k>font-family</span><span class=p>:</span><span class=w> </span><span class=kc>monospace</span><span class=p>;</span><span class=w> </span><span class=k>font-size</span><span class=p>:</span><span class=w> </span><span class=mi>13</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=w>        </span><span class=p>.</span><span class=nc>msg</span><span class=w> </span><span class=p>.</span><span class=nc>label</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>font-weight</span><span class=p>:</span><span class=w> </span><span class=mi>600</span><span class=p>;</span><span class=w> </span><span class=k>font-size</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>text-transform</span><span class=p>:</span><span class=w> </span><span class=kc>uppercase</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=w>        </span><span class=p>.</span><span class=nc>input-row</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>display</span><span class=p>:</span><span class=w> </span><span class=kc>flex</span><span class=p>;</span><span class=w> </span><span class=k>gap</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=w>        </span><span class=p>.</span><span class=nc>input-row</span><span class=w> </span><span class=nt>input</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>flex</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=kt>px</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>border</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=kt>px</span><span class=w> </span><span class=kc>solid</span><span class=w> </span><span class=mh>#ddd</span><span class=p>;</span><span class=w> </span><span class=k>border-radius</span><span class=p>:</span><span class=w> </span><span class=mi>6</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>font-size</span><span class=p>:</span><span class=w> </span><span class=mi>14</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=w>        </span><span class=p>.</span><span class=nc>input-row</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=kt>px</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>background</span><span class=p>:</span><span class=w> </span><span class=mh>#1a73e8</span><span class=p>;</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#fff</span><span class=p>;</span><span class=w> </span><span class=k>border</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span><span class=w> </span><span class=k>border-radius</span><span class=p>:</span><span class=w> </span><span class=mi>6</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>cursor</span><span class=p>:</span><span class=w> </span><span class=kc>pointer</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=w>        </span><span class=p>.</span><span class=nc>input-row</span><span class=w> </span><span class=nt>button</span><span class=p>:</span><span class=nd>disabled</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>opacity</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=w>        </span><span class=p>.</span><span class=nc>status</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>font-size</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#999</span><span class=p>;</span><span class=w> </span><span class=k>margin-top</span><span class=p>:</span><span class=w> </span><span class=mi>6</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=w>        </span><span class=c>/* Right: event log */</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=w>        </span><span class=p>.</span><span class=nc>event-log</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>420</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>display</span><span class=p>:</span><span class=w> </span><span class=kc>flex</span><span class=p>;</span><span class=w> </span><span class=k>flex-direction</span><span class=p>:</span><span class=w> </span><span class=kc>column</span><span class=p>;</span><span class=w> </span><span class=k>border-left</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=kt>px</span><span class=w> </span><span class=kc>solid</span><span class=w> </span><span class=mh>#ddd</span><span class=p>;</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>16</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>background</span><span class=p>:</span><span class=w> </span><span class=mh>#f9f9f9</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a><span class=w>        </span><span class=p>.</span><span class=nc>event-log</span><span class=w> </span><span class=nt>h2</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=w>        </span><span class=p>.</span><span class=nc>events</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>flex</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=k>overflow-y</span><span class=p>:</span><span class=w> </span><span class=kc>auto</span><span class=p>;</span><span class=w> </span><span class=k>font-family</span><span class=p>:</span><span class=w> </span><span class=kc>monospace</span><span class=p>;</span><span class=w> </span><span class=k>font-size</span><span class=p>:</span><span class=w> </span><span class=mi>12</span><span class=kt>px</span><span class=p>;</span><span class=w> </span><span class=k>line-height</span><span class=p>:</span><span class=w> </span><span class=mf>1.6</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class=w>        </span><span class=p>.</span><span class=nc>event-entry</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=kt>px</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=k>border-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=kt>px</span><span class=w> </span><span class=kc>solid</span><span class=w> </span><span class=mh>#eee</span><span class=p>;</span><span class=w> </span><span class=k>word-break</span><span class=p>:</span><span class=w> </span><span class=n>break-all</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=w>        </span><span class=p>.</span><span class=nc>event-type</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>font-weight</span><span class=p>:</span><span class=w> </span><span class=mi>700</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=w>        </span><span class=p>.</span><span class=nc>event-type</span><span class=p>.</span><span class=nc>lifecycle</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#8e44ad</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a><span class=w>        </span><span class=p>.</span><span class=nc>event-type</span><span class=p>.</span><span class=nc>text</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#27ae60</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a><span class=w>        </span><span class=p>.</span><span class=nc>event-type</span><span class=p>.</span><span class=nc>tool</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#e67e22</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a><span class=w>        </span><span class=p>.</span><span class=nc>event-type</span><span class=p>.</span><span class=nc>state</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>color</span><span class=p>:</span><span class=w> </span><span class=mh>#2980b9</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a><span class=w>    </span><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
<a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
<a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a>    <span class=cm>&lt;!-- Chat panel --&gt;</span>
<a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"chat"</span><span class=p>&gt;</span>
<a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a>        <span class=p>&lt;</span><span class=nt>h2</span><span class=p>&gt;</span>AG2 Weather Agent<span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
<a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"messages"</span> <span class=na>id</span><span class=o>=</span><span class=s>"messages"</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-4-42 name=__codelineno-4-42 href=#__codelineno-4-42></a>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"input-row"</span><span class=p>&gt;</span>
<a id=__codelineno-4-43 name=__codelineno-4-43 href=#__codelineno-4-43></a>            <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>"text"</span> <span class=na>id</span><span class=o>=</span><span class=s>"input"</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>"Ask about the weather..."</span> <span class=na>autofocus</span><span class=p>&gt;</span>
<a id=__codelineno-4-44 name=__codelineno-4-44 href=#__codelineno-4-44></a>            <span class=p>&lt;</span><span class=nt>button</span> <span class=na>id</span><span class=o>=</span><span class=s>"send"</span> <span class=na>onclick</span><span class=o>=</span><span class=s>"sendMessage()"</span><span class=p>&gt;</span>Send<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
<a id=__codelineno-4-45 name=__codelineno-4-45 href=#__codelineno-4-45></a>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-4-46 name=__codelineno-4-46 href=#__codelineno-4-46></a>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"status"</span> <span class=na>id</span><span class=o>=</span><span class=s>"status"</span><span class=p>&gt;</span>Ready<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-4-47 name=__codelineno-4-47 href=#__codelineno-4-47></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-4-48 name=__codelineno-4-48 href=#__codelineno-4-48></a>
<a id=__codelineno-4-49 name=__codelineno-4-49 href=#__codelineno-4-49></a>    <span class=cm>&lt;!-- Event log panel --&gt;</span>
<a id=__codelineno-4-50 name=__codelineno-4-50 href=#__codelineno-4-50></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"event-log"</span><span class=p>&gt;</span>
<a id=__codelineno-4-51 name=__codelineno-4-51 href=#__codelineno-4-51></a>        <span class=p>&lt;</span><span class=nt>h2</span><span class=p>&gt;</span>AG-UI Event Log<span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
<a id=__codelineno-4-52 name=__codelineno-4-52 href=#__codelineno-4-52></a>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"events"</span> <span class=na>id</span><span class=o>=</span><span class=s>"events"</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-4-53 name=__codelineno-4-53 href=#__codelineno-4-53></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-4-54 name=__codelineno-4-54 href=#__codelineno-4-54></a>
<a id=__codelineno-4-55 name=__codelineno-4-55 href=#__codelineno-4-55></a>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
<a id=__codelineno-4-56 name=__codelineno-4-56 href=#__codelineno-4-56></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>messagesEl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>'messages'</span><span class=p>);</span>
<a id=__codelineno-4-57 name=__codelineno-4-57 href=#__codelineno-4-57></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>eventsEl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>'events'</span><span class=p>);</span>
<a id=__codelineno-4-58 name=__codelineno-4-58 href=#__codelineno-4-58></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>inputEl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>'input'</span><span class=p>);</span>
<a id=__codelineno-4-59 name=__codelineno-4-59 href=#__codelineno-4-59></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>sendBtn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>'send'</span><span class=p>);</span>
<a id=__codelineno-4-60 name=__codelineno-4-60 href=#__codelineno-4-60></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>statusEl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>'status'</span><span class=p>);</span>
<a id=__codelineno-4-61 name=__codelineno-4-61 href=#__codelineno-4-61></a>
<a id=__codelineno-4-62 name=__codelineno-4-62 href=#__codelineno-4-62></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>messages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>
<a id=__codelineno-4-63 name=__codelineno-4-63 href=#__codelineno-4-63></a><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>msgSeq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<a id=__codelineno-4-64 name=__codelineno-4-64 href=#__codelineno-4-64></a>
<a id=__codelineno-4-65 name=__codelineno-4-65 href=#__codelineno-4-65></a><span class=w>    </span><span class=c1>// --- Event log: shows every AG-UI event as it arrives ---</span>
<a id=__codelineno-4-66 name=__codelineno-4-66 href=#__codelineno-4-66></a><span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>logEvent</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-67 name=__codelineno-4-67 href=#__codelineno-4-67></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>entry</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>'div'</span><span class=p>);</span>
<a id=__codelineno-4-68 name=__codelineno-4-68 href=#__codelineno-4-68></a><span class=w>        </span><span class=nx>entry</span><span class=p>.</span><span class=nx>className</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'event-entry'</span><span class=p>;</span>
<a id=__codelineno-4-69 name=__codelineno-4-69 href=#__codelineno-4-69></a>
<a id=__codelineno-4-70 name=__codelineno-4-70 href=#__codelineno-4-70></a><span class=w>        </span><span class=c1>// Color-code by category</span>
<a id=__codelineno-4-71 name=__codelineno-4-71 href=#__codelineno-4-71></a><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>cat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'lifecycle'</span><span class=p>;</span>
<a id=__codelineno-4-72 name=__codelineno-4-72 href=#__codelineno-4-72></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>'TEXT_MESSAGE'</span><span class=p>))</span><span class=w> </span><span class=nx>cat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'text'</span><span class=p>;</span>
<a id=__codelineno-4-73 name=__codelineno-4-73 href=#__codelineno-4-73></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>'TOOL_CALL'</span><span class=p>))</span><span class=w> </span><span class=nx>cat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'tool'</span><span class=p>;</span>
<a id=__codelineno-4-74 name=__codelineno-4-74 href=#__codelineno-4-74></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>'STATE'</span><span class=p>))</span><span class=w> </span><span class=nx>cat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'state'</span><span class=p>;</span>
<a id=__codelineno-4-75 name=__codelineno-4-75 href=#__codelineno-4-75></a>
<a id=__codelineno-4-76 name=__codelineno-4-76 href=#__codelineno-4-76></a><span class=w>        </span><span class=c1>// Show type + key fields (skip verbose ones)</span>
<a id=__codelineno-4-77 name=__codelineno-4-77 href=#__codelineno-4-77></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>details</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{...</span><span class=nx>event</span><span class=p>};</span>
<a id=__codelineno-4-78 name=__codelineno-4-78 href=#__codelineno-4-78></a><span class=w>        </span><span class=ow>delete</span><span class=w> </span><span class=nx>details</span><span class=p>.</span><span class=nx>type</span><span class=p>;</span>
<a id=__codelineno-4-79 name=__codelineno-4-79 href=#__codelineno-4-79></a><span class=w>        </span><span class=ow>delete</span><span class=w> </span><span class=nx>details</span><span class=p>.</span><span class=nx>timestamp</span><span class=p>;</span>
<a id=__codelineno-4-80 name=__codelineno-4-80 href=#__codelineno-4-80></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>extra</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>details</span><span class=p>).</span><span class=nx>length</span>
<a id=__codelineno-4-81 name=__codelineno-4-81 href=#__codelineno-4-81></a><span class=w>            </span><span class=o>?</span><span class=w> </span><span class=s1>' '</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>details</span><span class=p>)</span>
<a id=__codelineno-4-82 name=__codelineno-4-82 href=#__codelineno-4-82></a><span class=w>            </span><span class=o>:</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-83 name=__codelineno-4-83 href=#__codelineno-4-83></a>
<a id=__codelineno-4-84 name=__codelineno-4-84 href=#__codelineno-4-84></a><span class=w>        </span><span class=nx>entry</span><span class=p>.</span><span class=nx>innerHTML</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`&lt;span class="event-type </span><span class=si>${</span><span class=nx>cat</span><span class=si>}</span><span class=sb>"&gt;</span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=si>}</span><span class=sb>&lt;/span&gt;</span><span class=si>${</span><span class=nx>extra</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<a id=__codelineno-4-85 name=__codelineno-4-85 href=#__codelineno-4-85></a><span class=w>        </span><span class=nx>eventsEl</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>entry</span><span class=p>);</span>
<a id=__codelineno-4-86 name=__codelineno-4-86 href=#__codelineno-4-86></a><span class=w>        </span><span class=nx>eventsEl</span><span class=p>.</span><span class=nx>scrollTop</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>eventsEl</span><span class=p>.</span><span class=nx>scrollHeight</span><span class=p>;</span>
<a id=__codelineno-4-87 name=__codelineno-4-87 href=#__codelineno-4-87></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-4-88 name=__codelineno-4-88 href=#__codelineno-4-88></a>
<a id=__codelineno-4-89 name=__codelineno-4-89 href=#__codelineno-4-89></a><span class=w>    </span><span class=c1>// --- Add a message to the chat panel ---</span>
<a id=__codelineno-4-90 name=__codelineno-4-90 href=#__codelineno-4-90></a><span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>addMessage</span><span class=p>(</span><span class=nx>role</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-91 name=__codelineno-4-91 href=#__codelineno-4-91></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>div</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>'div'</span><span class=p>);</span>
<a id=__codelineno-4-92 name=__codelineno-4-92 href=#__codelineno-4-92></a><span class=w>        </span><span class=nx>div</span><span class=p>.</span><span class=nx>className</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`msg </span><span class=si>${</span><span class=nx>role</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<a id=__codelineno-4-93 name=__codelineno-4-93 href=#__codelineno-4-93></a><span class=w>        </span><span class=nx>div</span><span class=p>.</span><span class=nx>innerHTML</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`&lt;div class="label"&gt;</span><span class=si>${</span><span class=nx>role</span><span class=si>}</span><span class=sb>&lt;/div&gt;&lt;div&gt;</span><span class=si>${</span><span class=nx>text</span><span class=si>}</span><span class=sb>&lt;/div&gt;`</span><span class=p>;</span>
<a id=__codelineno-4-94 name=__codelineno-4-94 href=#__codelineno-4-94></a><span class=w>        </span><span class=nx>messagesEl</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>div</span><span class=p>);</span>
<a id=__codelineno-4-95 name=__codelineno-4-95 href=#__codelineno-4-95></a><span class=w>        </span><span class=nx>messagesEl</span><span class=p>.</span><span class=nx>scrollTop</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>messagesEl</span><span class=p>.</span><span class=nx>scrollHeight</span><span class=p>;</span>
<a id=__codelineno-4-96 name=__codelineno-4-96 href=#__codelineno-4-96></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>div</span><span class=p>;</span>
<a id=__codelineno-4-97 name=__codelineno-4-97 href=#__codelineno-4-97></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-4-98 name=__codelineno-4-98 href=#__codelineno-4-98></a>
<a id=__codelineno-4-99 name=__codelineno-4-99 href=#__codelineno-4-99></a><span class=w>    </span><span class=c1>// --- Main: send a message and process the AG-UI event stream ---</span>
<a id=__codelineno-4-100 name=__codelineno-4-100 href=#__codelineno-4-100></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>sendMessage</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-101 name=__codelineno-4-101 href=#__codelineno-4-101></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>content</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>inputEl</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>trim</span><span class=p>();</span>
<a id=__codelineno-4-102 name=__codelineno-4-102 href=#__codelineno-4-102></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>content</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=p>;</span>
<a id=__codelineno-4-103 name=__codelineno-4-103 href=#__codelineno-4-103></a>
<a id=__codelineno-4-104 name=__codelineno-4-104 href=#__codelineno-4-104></a><span class=w>        </span><span class=c1>// Show user message and add to conversation history</span>
<a id=__codelineno-4-105 name=__codelineno-4-105 href=#__codelineno-4-105></a><span class=w>        </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'user'</span><span class=p>,</span><span class=w> </span><span class=nx>content</span><span class=p>);</span>
<a id=__codelineno-4-106 name=__codelineno-4-106 href=#__codelineno-4-106></a><span class=w>        </span><span class=nx>messages</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nb>String</span><span class=p>(</span><span class=o>++</span><span class=nx>msgSeq</span><span class=p>),</span><span class=w> </span><span class=nx>role</span><span class=o>:</span><span class=w> </span><span class=s1>'user'</span><span class=p>,</span><span class=w> </span><span class=nx>content</span><span class=w> </span><span class=p>});</span>
<a id=__codelineno-4-107 name=__codelineno-4-107 href=#__codelineno-4-107></a><span class=w>        </span><span class=nx>inputEl</span><span class=p>.</span><span class=nx>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-108 name=__codelineno-4-108 href=#__codelineno-4-108></a><span class=w>        </span><span class=nx>sendBtn</span><span class=p>.</span><span class=nx>disabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span>
<a id=__codelineno-4-109 name=__codelineno-4-109 href=#__codelineno-4-109></a><span class=w>        </span><span class=nx>statusEl</span><span class=p>.</span><span class=nx>textContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'Agent running...'</span><span class=p>;</span>
<a id=__codelineno-4-110 name=__codelineno-4-110 href=#__codelineno-4-110></a>
<a id=__codelineno-4-111 name=__codelineno-4-111 href=#__codelineno-4-111></a><span class=w>        </span><span class=c1>// Prepare the AG-UI RunAgentInput payload</span>
<a id=__codelineno-4-112 name=__codelineno-4-112 href=#__codelineno-4-112></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>payload</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-113 name=__codelineno-4-113 href=#__codelineno-4-113></a><span class=w>            </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=s1>'demo-thread'</span><span class=p>,</span>
<a id=__codelineno-4-114 name=__codelineno-4-114 href=#__codelineno-4-114></a><span class=w>            </span><span class=nx>runId</span><span class=o>:</span><span class=w> </span><span class=s1>'run-'</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>msgSeq</span><span class=p>,</span>
<a id=__codelineno-4-115 name=__codelineno-4-115 href=#__codelineno-4-115></a><span class=w>            </span><span class=nx>messages</span><span class=p>,</span>
<a id=__codelineno-4-116 name=__codelineno-4-116 href=#__codelineno-4-116></a><span class=w>            </span><span class=nx>tools</span><span class=o>:</span><span class=w> </span><span class=p>[],</span>
<a id=__codelineno-4-117 name=__codelineno-4-117 href=#__codelineno-4-117></a><span class=w>            </span><span class=nx>context</span><span class=o>:</span><span class=w> </span><span class=p>[],</span>
<a id=__codelineno-4-118 name=__codelineno-4-118 href=#__codelineno-4-118></a><span class=w>            </span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-4-119 name=__codelineno-4-119 href=#__codelineno-4-119></a><span class=w>            </span><span class=nx>forwardedProps</span><span class=o>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-4-120 name=__codelineno-4-120 href=#__codelineno-4-120></a><span class=w>        </span><span class=p>};</span>
<a id=__codelineno-4-121 name=__codelineno-4-121 href=#__codelineno-4-121></a>
<a id=__codelineno-4-122 name=__codelineno-4-122 href=#__codelineno-4-122></a><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>assistantText</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-123 name=__codelineno-4-123 href=#__codelineno-4-123></a><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>assistantDiv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span>
<a id=__codelineno-4-124 name=__codelineno-4-124 href=#__codelineno-4-124></a><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>toolName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-125 name=__codelineno-4-125 href=#__codelineno-4-125></a>
<a id=__codelineno-4-126 name=__codelineno-4-126 href=#__codelineno-4-126></a><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-127 name=__codelineno-4-127 href=#__codelineno-4-127></a><span class=w>            </span><span class=c1>// POST to the AG-UI endpoint and read the SSE stream</span>
<a id=__codelineno-4-128 name=__codelineno-4-128 href=#__codelineno-4-128></a><span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>fetch</span><span class=p>(</span><span class=s1>'/chat/'</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-129 name=__codelineno-4-129 href=#__codelineno-4-129></a><span class=w>                </span><span class=nx>method</span><span class=o>:</span><span class=w> </span><span class=s1>'POST'</span><span class=p>,</span>
<a id=__codelineno-4-130 name=__codelineno-4-130 href=#__codelineno-4-130></a><span class=w>                </span><span class=nx>headers</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-131 name=__codelineno-4-131 href=#__codelineno-4-131></a><span class=w>                    </span><span class=s1>'Content-Type'</span><span class=o>:</span><span class=w> </span><span class=s1>'application/json'</span><span class=p>,</span>
<a id=__codelineno-4-132 name=__codelineno-4-132 href=#__codelineno-4-132></a><span class=w>                    </span><span class=s1>'Accept'</span><span class=o>:</span><span class=w> </span><span class=s1>'text/event-stream'</span><span class=p>,</span>
<a id=__codelineno-4-133 name=__codelineno-4-133 href=#__codelineno-4-133></a><span class=w>                </span><span class=p>},</span>
<a id=__codelineno-4-134 name=__codelineno-4-134 href=#__codelineno-4-134></a><span class=w>                </span><span class=nx>body</span><span class=o>:</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>payload</span><span class=p>),</span>
<a id=__codelineno-4-135 name=__codelineno-4-135 href=#__codelineno-4-135></a><span class=w>            </span><span class=p>});</span>
<a id=__codelineno-4-136 name=__codelineno-4-136 href=#__codelineno-4-136></a>
<a id=__codelineno-4-137 name=__codelineno-4-137 href=#__codelineno-4-137></a><span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>reader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>getReader</span><span class=p>();</span>
<a id=__codelineno-4-138 name=__codelineno-4-138 href=#__codelineno-4-138></a><span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>decoder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>TextDecoder</span><span class=p>();</span>
<a id=__codelineno-4-139 name=__codelineno-4-139 href=#__codelineno-4-139></a><span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>buffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-140 name=__codelineno-4-140 href=#__codelineno-4-140></a>
<a id=__codelineno-4-141 name=__codelineno-4-141 href=#__codelineno-4-141></a><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-142 name=__codelineno-4-142 href=#__codelineno-4-142></a><span class=w>                </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>done</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>reader</span><span class=p>.</span><span class=nx>read</span><span class=p>();</span>
<a id=__codelineno-4-143 name=__codelineno-4-143 href=#__codelineno-4-143></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>done</span><span class=p>)</span><span class=w> </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-144 name=__codelineno-4-144 href=#__codelineno-4-144></a>
<a id=__codelineno-4-145 name=__codelineno-4-145 href=#__codelineno-4-145></a><span class=w>                </span><span class=nx>buffer</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>decoder</span><span class=p>.</span><span class=nx>decode</span><span class=p>(</span><span class=nx>value</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>stream</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>});</span>
<a id=__codelineno-4-146 name=__codelineno-4-146 href=#__codelineno-4-146></a><span class=w>                </span><span class=kd>const</span><span class=w> </span><span class=nx>lines</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>buffer</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>'\n'</span><span class=p>);</span>
<a id=__codelineno-4-147 name=__codelineno-4-147 href=#__codelineno-4-147></a><span class=w>                </span><span class=nx>buffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>lines</span><span class=p>.</span><span class=nx>pop</span><span class=p>()</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-148 name=__codelineno-4-148 href=#__codelineno-4-148></a>
<a id=__codelineno-4-149 name=__codelineno-4-149 href=#__codelineno-4-149></a><span class=w>                </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>line</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>lines</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-150 name=__codelineno-4-150 href=#__codelineno-4-150></a><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>line</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>'data: '</span><span class=p>))</span><span class=w> </span><span class=k>continue</span><span class=p>;</span>
<a id=__codelineno-4-151 name=__codelineno-4-151 href=#__codelineno-4-151></a><span class=w>                    </span><span class=kd>const</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>line</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mf>6</span><span class=p>);</span>
<a id=__codelineno-4-152 name=__codelineno-4-152 href=#__codelineno-4-152></a><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>'[DONE]'</span><span class=p>)</span><span class=w> </span><span class=k>continue</span><span class=p>;</span>
<a id=__codelineno-4-153 name=__codelineno-4-153 href=#__codelineno-4-153></a>
<a id=__codelineno-4-154 name=__codelineno-4-154 href=#__codelineno-4-154></a><span class=w>                    </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-155 name=__codelineno-4-155 href=#__codelineno-4-155></a><span class=w>                        </span><span class=kd>const</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
<a id=__codelineno-4-156 name=__codelineno-4-156 href=#__codelineno-4-156></a>
<a id=__codelineno-4-157 name=__codelineno-4-157 href=#__codelineno-4-157></a><span class=w>                        </span><span class=c1>// Log every event to the right panel</span>
<a id=__codelineno-4-158 name=__codelineno-4-158 href=#__codelineno-4-158></a><span class=w>                        </span><span class=nx>logEvent</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
<a id=__codelineno-4-159 name=__codelineno-4-159 href=#__codelineno-4-159></a>
<a id=__codelineno-4-160 name=__codelineno-4-160 href=#__codelineno-4-160></a><span class=w>                        </span><span class=c1>// Handle each event type</span>
<a id=__codelineno-4-161 name=__codelineno-4-161 href=#__codelineno-4-161></a><span class=w>                        </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-162 name=__codelineno-4-162 href=#__codelineno-4-162></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'TEXT_MESSAGE_START'</span><span class=o>:</span>
<a id=__codelineno-4-163 name=__codelineno-4-163 href=#__codelineno-4-163></a><span class=w>                                </span><span class=nx>assistantText</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-164 name=__codelineno-4-164 href=#__codelineno-4-164></a><span class=w>                                </span><span class=nx>assistantDiv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'assistant'</span><span class=p>,</span><span class=w> </span><span class=s1>''</span><span class=p>);</span>
<a id=__codelineno-4-165 name=__codelineno-4-165 href=#__codelineno-4-165></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-166 name=__codelineno-4-166 href=#__codelineno-4-166></a>
<a id=__codelineno-4-167 name=__codelineno-4-167 href=#__codelineno-4-167></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'TEXT_MESSAGE_CONTENT'</span><span class=o>:</span>
<a id=__codelineno-4-168 name=__codelineno-4-168 href=#__codelineno-4-168></a><span class=w>                                </span><span class=nx>assistantText</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>delta</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-169 name=__codelineno-4-169 href=#__codelineno-4-169></a><span class=w>                                </span><span class=nx>assistantDiv</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>'div:last-child'</span><span class=p>).</span><span class=nx>textContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>assistantText</span><span class=p>;</span>
<a id=__codelineno-4-170 name=__codelineno-4-170 href=#__codelineno-4-170></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-171 name=__codelineno-4-171 href=#__codelineno-4-171></a>
<a id=__codelineno-4-172 name=__codelineno-4-172 href=#__codelineno-4-172></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'TEXT_MESSAGE_CHUNK'</span><span class=o>:</span>
<a id=__codelineno-4-173 name=__codelineno-4-173 href=#__codelineno-4-173></a><span class=w>                                </span><span class=c1>// Non-streaming fallback: full message in one event</span>
<a id=__codelineno-4-174 name=__codelineno-4-174 href=#__codelineno-4-174></a><span class=w>                                </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'assistant'</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>delta</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>''</span><span class=p>);</span>
<a id=__codelineno-4-175 name=__codelineno-4-175 href=#__codelineno-4-175></a><span class=w>                                </span><span class=nx>assistantText</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>delta</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>''</span><span class=p>;</span>
<a id=__codelineno-4-176 name=__codelineno-4-176 href=#__codelineno-4-176></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-177 name=__codelineno-4-177 href=#__codelineno-4-177></a>
<a id=__codelineno-4-178 name=__codelineno-4-178 href=#__codelineno-4-178></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'TOOL_CALL_START'</span><span class=o>:</span>
<a id=__codelineno-4-179 name=__codelineno-4-179 href=#__codelineno-4-179></a><span class=w>                                </span><span class=nx>toolName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>toolCallName</span><span class=p>;</span>
<a id=__codelineno-4-180 name=__codelineno-4-180 href=#__codelineno-4-180></a><span class=w>                                </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'tool'</span><span class=p>,</span><span class=w> </span><span class=sb>`Calling </span><span class=si>${</span><span class=nx>toolName</span><span class=si>}</span><span class=sb>...`</span><span class=p>);</span>
<a id=__codelineno-4-181 name=__codelineno-4-181 href=#__codelineno-4-181></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-182 name=__codelineno-4-182 href=#__codelineno-4-182></a>
<a id=__codelineno-4-183 name=__codelineno-4-183 href=#__codelineno-4-183></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'TOOL_CALL_ARGS'</span><span class=o>:</span>
<a id=__codelineno-4-184 name=__codelineno-4-184 href=#__codelineno-4-184></a><span class=w>                                </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'tool'</span><span class=p>,</span><span class=w> </span><span class=sb>`  args: </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>delta</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<a id=__codelineno-4-185 name=__codelineno-4-185 href=#__codelineno-4-185></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-186 name=__codelineno-4-186 href=#__codelineno-4-186></a>
<a id=__codelineno-4-187 name=__codelineno-4-187 href=#__codelineno-4-187></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'TOOL_CALL_RESULT'</span><span class=o>:</span>
<a id=__codelineno-4-188 name=__codelineno-4-188 href=#__codelineno-4-188></a><span class=w>                                </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'tool'</span><span class=p>,</span><span class=w> </span><span class=sb>`  result: </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>content</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<a id=__codelineno-4-189 name=__codelineno-4-189 href=#__codelineno-4-189></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-190 name=__codelineno-4-190 href=#__codelineno-4-190></a>
<a id=__codelineno-4-191 name=__codelineno-4-191 href=#__codelineno-4-191></a><span class=w>                            </span><span class=k>case</span><span class=w> </span><span class=s1>'RUN_ERROR'</span><span class=o>:</span>
<a id=__codelineno-4-192 name=__codelineno-4-192 href=#__codelineno-4-192></a><span class=w>                                </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'assistant'</span><span class=p>,</span><span class=w> </span><span class=sb>`Error: </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<a id=__codelineno-4-193 name=__codelineno-4-193 href=#__codelineno-4-193></a><span class=w>                                </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-4-194 name=__codelineno-4-194 href=#__codelineno-4-194></a><span class=w>                        </span><span class=p>}</span>
<a id=__codelineno-4-195 name=__codelineno-4-195 href=#__codelineno-4-195></a><span class=w>                    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=cm>/* skip parse errors */</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-4-196 name=__codelineno-4-196 href=#__codelineno-4-196></a><span class=w>                </span><span class=p>}</span>
<a id=__codelineno-4-197 name=__codelineno-4-197 href=#__codelineno-4-197></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-4-198 name=__codelineno-4-198 href=#__codelineno-4-198></a>
<a id=__codelineno-4-199 name=__codelineno-4-199 href=#__codelineno-4-199></a><span class=w>            </span><span class=c1>// Add assistant response to conversation history</span>
<a id=__codelineno-4-200 name=__codelineno-4-200 href=#__codelineno-4-200></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>assistantText</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-201 name=__codelineno-4-201 href=#__codelineno-4-201></a><span class=w>                </span><span class=nx>messages</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nb>String</span><span class=p>(</span><span class=o>++</span><span class=nx>msgSeq</span><span class=p>),</span><span class=w> </span><span class=nx>role</span><span class=o>:</span><span class=w> </span><span class=s1>'assistant'</span><span class=p>,</span><span class=w> </span><span class=nx>content</span><span class=o>:</span><span class=w> </span><span class=nx>assistantText</span><span class=w> </span><span class=p>});</span>
<a id=__codelineno-4-202 name=__codelineno-4-202 href=#__codelineno-4-202></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-4-203 name=__codelineno-4-203 href=#__codelineno-4-203></a>
<a id=__codelineno-4-204 name=__codelineno-4-204 href=#__codelineno-4-204></a><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-205 name=__codelineno-4-205 href=#__codelineno-4-205></a><span class=w>            </span><span class=nx>addMessage</span><span class=p>(</span><span class=s1>'assistant'</span><span class=p>,</span><span class=w> </span><span class=sb>`Connection error: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<a id=__codelineno-4-206 name=__codelineno-4-206 href=#__codelineno-4-206></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-4-207 name=__codelineno-4-207 href=#__codelineno-4-207></a>
<a id=__codelineno-4-208 name=__codelineno-4-208 href=#__codelineno-4-208></a><span class=w>        </span><span class=nx>sendBtn</span><span class=p>.</span><span class=nx>disabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>;</span>
<a id=__codelineno-4-209 name=__codelineno-4-209 href=#__codelineno-4-209></a><span class=w>        </span><span class=nx>statusEl</span><span class=p>.</span><span class=nx>textContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>'Ready'</span><span class=p>;</span>
<a id=__codelineno-4-210 name=__codelineno-4-210 href=#__codelineno-4-210></a><span class=w>        </span><span class=nx>inputEl</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
<a id=__codelineno-4-211 name=__codelineno-4-211 href=#__codelineno-4-211></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-4-212 name=__codelineno-4-212 href=#__codelineno-4-212></a>
<a id=__codelineno-4-213 name=__codelineno-4-213 href=#__codelineno-4-213></a><span class=w>    </span><span class=nx>inputEl</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>'keydown'</span><span class=p>,</span><span class=w> </span><span class=nx>e</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-214 name=__codelineno-4-214 href=#__codelineno-4-214></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>key</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>'Enter'</span><span class=p>)</span><span class=w> </span><span class=nx>sendMessage</span><span class=p>();</span>
<a id=__codelineno-4-215 name=__codelineno-4-215 href=#__codelineno-4-215></a><span class=w>    </span><span class=p>});</span>
<a id=__codelineno-4-216 name=__codelineno-4-216 href=#__codelineno-4-216></a><span class=w>    </span><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<a id=__codelineno-4-217 name=__codelineno-4-217 href=#__codelineno-4-217></a><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<a id=__codelineno-4-218 name=__codelineno-4-218 href=#__codelineno-4-218></a><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> </details> <p>The key parts to notice:</p> <ul> <li><strong>The payload</strong> follows the AG-UI <code>RunAgentInput</code> schema, <code>messages</code> carries the conversation history, and <code>Accept: text/event-stream</code> tells the server to stream SSE</li> <li><strong>The <code>switch</code> on <code>event.type</code></strong> is the entire integration logic, the frontend reacts to each event type as it arrives</li> <li><strong>Tool events</strong> (<code>TOOL_CALL_START</code> â†’ <code>TOOL_CALL_ARGS</code> â†’ <code>TOOL_CALL_RESULT</code>) show up in the chat as they happen, giving the user visibility into what the agent is doing</li> </ul> <p>Open <code>http://localhost:8456</code> in your browser, the backend serves both the frontend and the AG-UI event stream.</p> <p>The page is split into two panels. On the left, a simple chat interface. On the right, every AG-UI event is logged as it arrives -- color-coded by category (purple for lifecycle, green for text, orange for tool calls). This lets you see exactly what the protocol is doing in real time.</p> <p><img alt="Sample Output" src=2026-02-17-AG2-AG-UI-Protocol/img/demo-ui.webp></p> <h3 id=try-it-yourself><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#try-it-yourself>Try It Yourself</a></h3> <p>The complete working code is available in the <a href=https://github.com/ag2ai/build-with-ag2>build-with-ag2</a> repository:</p> <ul> <li><strong><a href=https://github.com/ag2ai/build-with-ag2/tree/main/ag-ui/weather>Weather Agent</a></strong> is a single-agent chat with a weather tool, as above, with our signature AG2 styling</li> </ul> <h3 id=frontend-libraries><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#frontend-libraries>Frontend Libraries</a></h3> <p>The HTML approach above is great for understanding the protocol, but AG-UI's ecosystem includes frontend libraries that handle event consumption and provide pre-built UI components.</p> <p><strong><a href=https://www.copilotkit.ai/ >CopilotKit</a></strong>, the team behind AG-UI, provides React components, hooks for bidirectional state sync, and human-in-the-loop patterns. Works with AG2 out of the box via <a href=https://docs.ag-ui.com/sdk/js/client/overview><code>@ag-ui/client</code></a>. See the <a href=https://docs.copilotkit.ai/ag2>CopilotKit AG2 guide</a> to get started.</p> <p>With CopilotKit, for example, the entire frontend becomes:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>CopilotKit</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>"@copilotkit/react-core"</span><span class=p>;</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>CopilotChat</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>"@copilotkit/react-ui"</span><span class=p>;</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=p>&lt;</span><span class=nt>CopilotKit</span><span class=w> </span><span class=na>runtimeUrl</span><span class=o>=</span><span class=s>"/api/copilotkit"</span><span class=w> </span><span class=na>agent</span><span class=o>=</span><span class=s>"weather_agent"</span><span class=p>&gt;</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=p>&lt;</span><span class=nt>CopilotChat</span><span class=w> </span><span class=p>/&gt;</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=p>&lt;/</span><span class=nt>CopilotKit</span><span class=p>&gt;</span>
</code></pre></div> <p>All the SSE parsing, event routing, and streaming text rendering from our manual frontend is handled for you. The backend stays exactly the same with <code>AGUIStream</code> serving the same AG-UI events regardless of which frontend consumes them.</p> <h3 id=what-about-multi-agent><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#what-about-multi-agent>What About Multi-Agent?</a></h3> <p>Today's AG-UI integration works with a single <code>ConversableAgent</code>. This gives you streaming text, tool visualization, state synchronization, and error handling out of the box. But the real strength of AG2 is multi-agent workflows: group chats, handoffs, sequential pipelines, and nested conversations. So how do you visualize those?</p> <p>AG-UI doesn't natively support multi-agent workflows yet -- it sees a single agent on the backend. But you can simulate a multi-agent pipeline today using <code>ContextVariables</code> and <code>STATE_SNAPSHOT</code> events. The approach:</p> <ol> <li><strong>A single orchestrator agent</strong> with stage-specific tools (e.g. <code>submit_plan</code>, <code>submit_draft</code>, <code>submit_review</code>)</li> <li><strong>Each tool sets <code>context_variables["active_agent"]</code></strong> and <code>context_variables["stage"]</code>** to signal which "agent" is working and what phase the pipeline is in</li> <li><strong>AG2's <code>AGUIStream</code> automatically emits a <code>STATE_SNAPSHOT</code></strong> event whenever <code>ContextVariables</code> change, delivering the updated state to the frontend over SSE</li> <li><strong>The frontend reads <code>active_agent</code> and <code>stage</code></strong> from the snapshot to update the UI -- highlighting the active agent, showing pipeline progress, and rendering stage-appropriate content</li> </ol> <p>This keeps all transition logic in the backend as the single source of truth. The frontend just reacts to state changes.</p> <p>We built a full working example of this pattern -- the <a href=https://github.com/ag2ai/build-with-ag2/tree/main/ag-ui/factory>Feedback Factory</a> -- a multi-stage document creation pipeline with a 3-panel UI showing agent pipeline, document preview, and conversation log.</p> <p><strong>Native multi-agent support is an active focus for us.</strong> We're working with the CopilotKit team on bringing first-class multi-agent patterns to the AG-UI protocol so you won't need the orchestrator workaround. If you're interested in this direction, watch the <a href=https://github.com/ag2ai/ag2>AG2 repository</a> for updates and join the conversation on <a href=https://discord.gg/pAbnFJrkgZ>Discord</a>.</p> <h3 id=learn-more><a class=toclink href=2026/02/17/AG2-AG-UI-Protocol/#learn-more>Learn More</a></h3> <ul> <li><a href=https://docs.ag2.ai/latest/docs/user-guide/ag-ui/ >AG2 AG-UI User Guide</a> -- Full integration documentation including authentication, context variables, and frontend tools</li> <li><a href=https://docs.copilotkit.ai/ag2>AG2 @ CopilotKit</a> -- CopilotKit's AG-UI and AG2 documentation</li> <li><a href=https://docs.ag-ui.com/introduction>AG-UI Protocol Documentation</a> -- Protocol specification and event type reference</li> <li><a href=https://dojo.ag-ui.com/ag2/feature/agentic_chat>AG-UI Dojo</a> -- Interactive playground for testing AG-UI integrations across frameworks</li> </ul> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/marklysze.png alt="Mark Sze"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2026-02-08 00:00:00+00:00">February 8, 2026</time></li> <li class=md-meta__item> in <a href=category/tracing/ class=md-meta__link>Tracing</a>, <a href=category/opentelemetry/ class=md-meta__link>OpenTelemetry</a>, <a href=category/observability/ class=md-meta__link>Observability</a>, <a href=category/multi-agent/ class=md-meta__link>Multi-Agent</a>, <a href=category/debugging/ class=md-meta__link>Debugging</a></li> <li class=md-meta__item> 8 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=ag2-opentelemetry-tracing-full-observability-for-multi-agent-systems><a href=2026/02/08/AG2-OpenTelemetry-Tracing/ class=toclink>AG2 OpenTelemetry Tracing: Full Observability for Multi-Agent Systems</a></h2> <p><img alt="AG2 OpenTelemetry Tracing" src=2026-02-08-AG2-OpenTelemetry-Tracing/img/ag2-opentelemetry.webp></p> <p>Multi-agent systems are powerful -- but when something goes wrong, figuring out <em>where</em> and <em>why</em> is painful. Which agent made the bad decision? Was the LLM call slow, or did the tool fail? How many tokens did that group chat actually use?</p> <p>AG2 now has built-in <a href=https://opentelemetry.io/ >OpenTelemetry</a> tracing that gives you full visibility into your multi-agent workflows. Every conversation, agent turn, LLM call, tool execution, and speaker selection is captured as a structured span -- connected by a shared trace ID and exportable to any OpenTelemetry-compatible backend.</p> <p>Key highlights:</p> <ul> <li><strong>Four simple API functions</strong> to instrument agents, LLM calls, group chats, and A2A servers</li> <li><strong>Hierarchical traces</strong> that mirror how agents process conversations</li> <li><strong>Distributed tracing</strong> across services using W3C Trace Context propagation</li> <li><strong>Works with any backend</strong> -- Jaeger, Grafana Tempo, Datadog, Honeycomb, and more</li> <li><strong>Follows OpenTelemetry GenAI Semantic Conventions</strong> for standard interoperability</li> </ul> <h3 id=what-is-opentelemetry-tracing><a class=toclink href=2026/02/08/AG2-OpenTelemetry-Tracing/#what-is-opentelemetry-tracing>What is OpenTelemetry Tracing?</a></h3> <p><a href=https://opentelemetry.io/ >OpenTelemetry</a> is the industry-standard framework for observability in distributed systems. At its core, <strong>tracing</strong> captures the path of a request through your system as a tree of <em>spans</em> -- each span representing a unit of work (an LLM call, a tool execution, an agent turn) with timing, attributes, and parent-child relationships.</p> <p>A few key concepts:</p> <ul> <li><strong>Trace</strong> -- A complete end-to-end record of a request, represented as a tree of spans sharing a single trace ID.</li> <li><strong>Span</strong> -- A single unit of work within a trace (e.g. an LLM call or a tool execution). Each span has a name, start/end timestamps, a parent span (forming the tree), and key-value <strong>attributes</strong> that carry metadata like model name, token counts, or tool arguments.</li> <li><strong>Span Kind</strong> -- An OpenTelemetry classification of how a span relates to the outside world. AG2 uses <code>CLIENT</code> for LLM spans (outgoing calls to an external API) and <code>INTERNAL</code> (the default) for all other spans like agent turns, tool executions, and conversations.</li> <li><strong>Span Type (<code>ag2.span.type</code>)</strong> -- AG2's own attribute that classifies <em>what</em> each span represents: <code>conversation</code>, <code>agent</code>, <code>llm</code>, <code>tool</code>, <code>code_execution</code>, <code>human_input</code>, or <code>speaker_selection</code>. This lets you filter and group spans by their role in the agent workflow.</li> </ul> <p>For multi-agent systems, tracing answers questions like:</p> <ul> <li>What was the full sequence of agent interactions in this conversation?</li> <li>How long did each LLM call take, and how many tokens did it consume?</li> <li>Which tool was called, with what arguments, and what did it return?</li> <li>In a group chat, why was a particular agent selected to speak?</li> <li>Across multiple services, how did a request flow from client to remote agent?</li> </ul> <p>AG2's tracing follows the <a href=https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-agent-spans/ >OpenTelemetry GenAI Semantic Conventions</a> so your agent traces are structured in a considered, agentic, way.</p> <nav class=md-post__action> <a href=2026/02/08/AG2-OpenTelemetry-Tracing/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/priyansh4320.png alt="Priyanshu Deshmukh"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-12-29 00:00:00+00:00">December 29, 2025</time></li> <li class=md-meta__item> in <a href=category/google-gemini/ class=md-meta__link>Google Gemini</a>, <a href=category/thinking-config/ class=md-meta__link>Thinking Config</a>, <a href=category/reasoning/ class=md-meta__link>Reasoning</a>, <a href=category/llm-configuration/ class=md-meta__link>LLM Configuration</a>, <a href=category/agent-chat/ class=md-meta__link>Agent Chat</a></li> <li class=md-meta__item> 11 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=ag2-gemini-thinking-configuration-enhanced-reasoning-control-with-thinkingconfig><a href=2025/12/29/AG2-Gemini-Thinking-Config-Support/ class=toclink>AG2 Gemini Thinking Configuration: Enhanced Reasoning Control with ThinkingConfig</a></h2> <p>AG2 v0.10.3 introduces native support for Google Gemini's Thinking Configuration, enabling fine-grained control over how Gemini models approach complex reasoning tasks. With <code>thinking_budget</code>, <code>thinking_level</code>, and <code>include_thoughts</code> parameters, you can now customize the depth and transparency of your agent's reasoning process, making it ideal for complex problem-solving, research tasks, and scenarios where you need insight into the model's internal reasoning.</p> <p>This article explores how to leverage Gemini Thinking Configuration in AG2 for enhanced reasoning capabilities, with practical examples for different use cases and model variants.</p> <p>Google Gemini models support advanced reasoning features that allow them to "think" through problems before providing answers. This internal reasoning process can significantly improve performance on complex tasks, but until now, controlling this behavior in AG2 required custom configurations or workarounds.</p> <p>AG2 v0.10.3's native ThinkingConfig support solves this by providing direct access to Gemini's thinking parameters through the standard <code>LLMConfig</code> interface, making it easy to:</p> <ul> <li>Control the amount of reasoning tokens allocated to complex problems</li> <li>Adjust thinking intensity for different task complexities</li> <li>Reveal the model's internal reasoning process when needed</li> <li>Optimize cost and performance based on your specific use case</li> </ul> <p><strong>Key Features:</strong></p> <ul> <li><strong><code>thinking_budget</code></strong>: Control the exact number of tokens allocated for reasoning (Gemini 2.5 series)</li> <li><strong><code>thinking_level</code></strong>: Set thinking intensity levels - High, Medium, Low, or Minimal (Gemini 3 series)</li> <li><strong><code>include_thoughts</code></strong>: Choose whether to include thought summaries in responses for transparency</li> <li><strong>Model-Specific Support</strong>: Automatic handling of different parameter sets for Gemini 2.5 and Gemini 3 models</li> <li><strong>Seamless Integration</strong>: Configure through standard <code>LLMConfig</code> - no special setup required</li> </ul> <p><strong>Why This Matters:</strong></p> <p>Understanding and controlling how AI models reason is crucial for building trustworthy, efficient agent systems. Gemini's thinking configuration allows you to balance between thorough reasoning (better accuracy on complex tasks) and efficiency (faster responses, lower costs). AG2's integration makes this accessible without complex API wrangling.</p> <p><strong>When to Use Thinking Configuration:</strong></p> <p>Use Thinking Configuration when you need:</p> <ul> <li><strong>Complex Problem Solving</strong>: Tasks requiring multi-step reasoning, logic puzzles, or analytical thinking</li> <li><strong>Research and Analysis</strong>: Deep research tasks where thorough thinking improves quality</li> <li><strong>Debugging and Transparency</strong>: Understanding how your agent approaches problems</li> <li><strong>Cost Optimization</strong>: Fine-tuning reasoning depth based on task complexity</li> <li><strong>Performance Tuning</strong>: Balancing response quality against latency and token usage</li> </ul> <p>Don't use thinking configuration for simple, straightforward tasks where the overhead isn't beneficial, or when you need minimal latency above all else.</p> <h3 id=understanding-thinking-configuration><a class=toclink href=2025/12/29/AG2-Gemini-Thinking-Config-Support/#understanding-thinking-configuration>Understanding Thinking Configuration</a></h3> <p>Gemini's Thinking Configuration consists of three main parameters that control different aspects of the model's reasoning process:</p> <nav class=md-post__action> <a href=2025/12/29/AG2-Gemini-Thinking-Config-Support/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/priyansh4320.png alt="Priyanshu Deshmukh"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-12-24 00:00:00+00:00">December 24, 2025</time></li> <li class=md-meta__item> in <a href=category/mcp/ class=md-meta__link>MCP</a>, <a href=category/session-management/ class=md-meta__link>Session Management</a>, <a href=category/multi-server/ class=md-meta__link>Multi-Server</a>, <a href=category/dynamic-tools/ class=md-meta__link>Dynamic Tools</a>, <a href=category/model-context-protocol/ class=md-meta__link>Model Context Protocol</a></li> <li class=md-meta__item> 10 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=ag2-multi-mcp-session-management-dynamic-server-connections-with-mcpclientsessionmanager><a href=2025/12/24/AG2-MultiMCPSessionManager/ class=toclink>AG2 Multi-MCP Session Management: Dynamic Server Connections with MCPClientSessionManager</a></h2> <p>AG2's <code>MCPClientSessionManager</code> revolutionizes how you connect to multiple MCP (Model Context Protocol) servers by enabling on-demand session creation within your agent workflows. Instead of maintaining persistent connections, you can now dynamically open sessions to different serversâ€”whether they use stdio or SSE transportsâ€”right inside your tool functions.</p> <p>This article explores how to leverage <code>MCPClientSessionManager</code> for flexible, resource-efficient multi-server agent architectures, with practical examples for building research assistants, data pipelines, and intelligent routing systems.</p> <p>{/<em> more </em>/}</p> <p>Traditional MCP integration patterns require opening sessions at application startup and keeping them alive for the entire workflow duration. While this works for single-server scenarios, it becomes cumbersome when you need to:</p> <ul> <li>Connect to multiple servers dynamically</li> <li>Switch between servers based on user queries</li> <li>Manage resources efficiently</li> <li>Handle both local (stdio) and remote (SSE) servers</li> </ul> <p><code>MCPClientSessionManager</code> solves these challenges by providing a clean, context-manager-based API for opening sessions on-demand, exactly when and where you need them.</p> <p><strong>Key Features:</strong></p> <ul> <li> <p><strong>On-Demand Session Creation</strong>: Open MCP sessions only when needed, inside tool functions or agent workflows</p> </li> <li> <p><strong>Multi-Transport Support</strong>: Seamlessly handle both <code>stdio</code> (process-based) and <code>SSE</code> (HTTP-based) protocols</p> </li> <li> <p><strong>Dynamic Server Selection</strong>: Let agents choose which server to connect to based on runtime conditions</p> </li> <li> <p><strong>Automatic Resource Management</strong>: Context managers ensure proper cleanup, preventing resource leaks</p> </li> <li> <p><strong>Session Isolation</strong>: Each query gets a fresh session, preventing state pollution between requests</p> </li> <li> <p><strong>Tool-Based Integration</strong>: Wrap session management in tools for LLM-driven server selection</p> </li> </ul> <p><strong>Why This Matters:</strong></p> <p>Building multi-server agent systems traditionally requires complex connection pooling, manual resource management, and rigid server selection logic. <code>MCPClientSessionManager</code> abstracts away these complexities, allowing you to focus on building intelligent agent workflows that can dynamically adapt to different data sources and services.</p> <p><strong>When to Use MCPClientSessionManager:</strong></p> <p>Use <code>MCPClientSessionManager</code> when you need:</p> <ul> <li> <p><strong>Multi-Server Workflows</strong>: Connect to multiple MCP servers (arXiv, Wikipedia, databases, APIs) in a single workflow</p> </li> <li> <p><strong>Dynamic Server Selection</strong>: Let agents decide which server to use based on the query context</p> </li> <li> <p><strong>Resource Efficiency</strong>: Avoid keeping connections open when not in use</p> </li> <li> <p><strong>Mixed Transport Types</strong>: Work with both local stdio servers and remote SSE endpoints</p> </li> <li> <p><strong>Tool-Based Architecture</strong>: Integrate MCP servers as tools that agents can invoke on-demand</p> </li> </ul> <p>Don't use <code>MCPClientSessionManager</code> for single-server, long-running workflows where persistent connections are more efficient.</p> <h3 id=understanding-mcpclientsessionmanager><a class=toclink href=2025/12/24/AG2-MultiMCPSessionManager/#understanding-mcpclientsessionmanager>Understanding MCPClientSessionManager</a></h3> <p><code>MCPClientSessionManager</code> is a utility class that simplifies managing MCP client sessions. Unlike traditional approaches where you open a session at startup and keep it alive, <code>MCPClientSessionManager</code> enables:</p> <ul> <li><strong>On-demand session creation</strong>: Create sessions only when needed within your workflow</li> <li><strong>Dynamic server switching</strong>: Select which MCP server to connect to at runtime</li> <li><strong>Multi-transport management</strong>: Handle both <code>stdio</code> (process-based) and <code>SSE</code> (HTTP-based) protocols</li> <li><strong>Automatic cleanup</strong>: Context managers ensure proper resource management</li> </ul> <nav class=md-post__action> <a href=2025/12/24/AG2-MultiMCPSessionManager/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/priyansh4320.png alt="Priyanshu Deshmukh"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-12-24 00:00:00+00:00">December 24, 2025</time></li> <li class=md-meta__item> in <a href=category/shell-tool/ class=md-meta__link>Shell Tool</a>, <a href=category/built-in-tools/ class=md-meta__link>Built-in Tools</a>, <a href=category/devops/ class=md-meta__link>DevOps</a>, <a href=category/automation/ class=md-meta__link>Automation</a>, <a href=category/openai-responses-api/ class=md-meta__link>OpenAI Responses API</a></li> <li class=md-meta__item> 10 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=ag2-shell-tool-integration-command-execution-and-multi-tool-devops-orchestration><a href=2025/12/24/AG2-Shell-Tool-and-multi-in-built-tool-execution/ class=toclink>AG2 Shell Tool Integration: Command Execution and Multi-Tool DevOps Orchestration</a></h2> <p>AG2's shell tool integration with OpenAI's Responses API enables agents to execute shell commands directly, unlocking powerful automation capabilities for filesystem operations, build processes, and system diagnostics. Combined with the apply_patch tool, you can orchestrate complete DevOps pipelinesâ€”from project creation to deployment validationâ€”all within a single agent workflow.</p> <p>This article explores how to leverage AG2's built-in tools for command execution, file operations, and multi-tool orchestration, with practical examples for automating development workflows and building production-ready DevOps pipelines.</p> <p>{/<em> more </em>/}</p> <p>Traditional agent workflows often require custom integrations for every system operationâ€”file creation, command execution, testing, and deployment each need separate tooling. AG2's built-in tools eliminate this complexity by providing native support for:</p> <ul> <li><strong>Shell command execution</strong>: Run any shell command through a controlled interface</li> <li><strong>Structured file operations</strong>: Create, update, and delete files with precise control</li> <li><strong>Multi-tool orchestration</strong>: Combine tools seamlessly in agent workflows</li> <li><strong>Security controls</strong>: Built-in protection against dangerous commands</li> </ul> <p><strong>Key Features:</strong></p> <ul> <li> <p><strong>Native Shell Integration</strong>: Execute shell commands directly through OpenAI's Responses API</p> </li> <li> <p><strong>Multi-Tool Support</strong>: Use <code>apply_patch</code> and <code>shell</code> tools together in the same workflow</p> </li> <li> <p><strong>Security Controls</strong>: Configure dangerous patterns, allowed commands, and denied commands</p> </li> <li> <p><strong>DevOps Automation</strong>: Complete pipeline orchestration from code to deployment</p> </li> <li> <p><strong>Concurrent Execution</strong>: Multiple commands can run simultaneously within a single shell call</p> </li> <li> <p><strong>Production Ready</strong>: Built-in safeguards and validation for production deployments</p> </li> </ul> <p><strong>Why This Matters:</strong></p> <p>Building automated development workflows traditionally requires complex integrations, custom scripts, and manual coordination between different tools. AG2's built-in tools provide a unified interface that enables agents to handle the entire software development lifecycleâ€”from initial project setup through testing, building, and deploymentâ€”with intelligent routing and error handling.</p> <p><strong>When to Use Built-in Tools:</strong></p> <p>Use AG2's built-in tools when you need:</p> <ul> <li><strong>Filesystem Operations</strong>: Create, modify, or delete files programmatically</li> <li><strong>Command Execution</strong>: Run tests, builds, deployments, or system diagnostics</li> <li><strong>DevOps Automation</strong>: Orchestrate complete CI/CD pipelines</li> <li><strong>Multi-Step Workflows</strong>: Chain file operations and commands together</li> <li><strong>Development Automation</strong>: Automate repetitive development tasks</li> </ul> <p>Don't use built-in tools for simple text generation or when you need custom tool integrations that aren't supported.</p> <h3 id=understanding-built-in-tools><a class=toclink href=2025/12/24/AG2-Shell-Tool-and-multi-in-built-tool-execution/#understanding-built-in-tools>Understanding Built-in Tools</a></h3> <p>AG2 provides two powerful built-in tools that work seamlessly with OpenAI's Responses API:</p> <p><strong>1. Shell Tool</strong>: Executes shell commands through your system's command-line interface - Supports concurrent command execution - Includes timeout and output length limits - Provides security controls for dangerous commands - Works on Mac/Linux and Windows</p> <p><strong>2. Apply Patch Tool</strong>: Performs structured file operations - Create new files with content - Update existing files using unified diff format - Delete files when needed - Maintains file structure and formatting</p> <p>Together, these tools enable complete automation of software development workflows.</p> <nav class=md-post__action> <a href=2025/12/24/AG2-Shell-Tool-and-multi-in-built-tool-execution/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/priyansh4320.png alt="Priyanshu Deshmukh"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-12-23 00:00:00+00:00">December 23, 2025</time></li> <li class=md-meta__item> in <a href=category/logging/ class=md-meta__link>Logging</a>, <a href=category/observability/ class=md-meta__link>Observability</a>, <a href=category/python/ class=md-meta__link>Python</a>, <a href=category/events/ class=md-meta__link>Events</a>, <a href=category/debugging/ class=md-meta__link>Debugging</a></li> <li class=md-meta__item> 8 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=ag2-event-logging-standardized-observability-with-python-logging><a href=2025/12/23/Ag2-logging-events/ class=toclink>AG2 Event Logging: Standardized Observability with Python Logging</a></h2> <p><img alt="AG2 Event Logging" src=2025-12-23-Ag2-logging-events/img/observability.png></p> <p>AG2 now integrates with Python's standard <code>logging</code> module for event output, giving you full control over how agent events are captured, formatted, and processed. This integration brings enterprise-grade observability directly into your agent workflows.</p> <p>This article explores how to configure and customize AG2 event logging, with practical examples for testing, monitoring, and production deployments.</p> <p>{/<em> more </em>/}</p> <h3 id=what-is-ag2-event-logging><a class=toclink href=2025/12/23/Ag2-logging-events/#what-is-ag2-event-logging>What is AG2 Event Logging?</a></h3> <p>AG2 event logging provides a standardized way to capture and process events from agent interactions. All event output flows through the <code>ag2.event.processor</code> logger, which uses Python's standard <code>logging</code> module under the hood.</p> <p><strong>Key Features:</strong></p> <ul> <li><strong>Standard Python Logging</strong>: Leverages the familiar <code>logging</code> module you already know</li> <li><strong>Centralized Configuration</strong>: Configure once at application startup, affects all AG2 components</li> <li><strong>Flexible Handlers</strong>: Use any Python logging handler (file, stream, HTTP, database, etc.)</li> <li><strong>Custom Formatters</strong>: Structure output as JSON, plain text, or any custom format</li> <li><strong>Powerful Filters</strong>: Selectively log events based on content, level, or custom criteria</li> <li><strong>Backwards Compatible</strong>: Default behavior unchanged if no custom configuration is provided</li> </ul> <p><strong>Why This Matters:</strong></p> <p>Traditional logging approaches often require custom integration code for each component. AG2's event logging provides a unified interface that works consistently across all agent types, conversation patterns, and execution modes. Whether you're debugging a single-agent workflow or monitoring a complex multi-agent system, the same logging configuration applies.</p> <p><strong>When to Use Custom Event Logging:</strong></p> <p>Use custom event logging when you need: - <strong>Testing and Validation</strong>: Capture event output to verify agent behavior in automated tests - <strong>Production Monitoring</strong>: Send events to monitoring systems, log aggregation services, or databases - <strong>Debugging</strong>: Filter and format events to focus on specific issues or agent interactions - <strong>Compliance and Auditing</strong>: Maintain detailed logs of agent decisions and actions - <strong>Performance Analysis</strong>: Track event timing and frequency for optimization</p> <p>Don't use custom logging for simple development workflowsâ€”the default console output is sufficient for that.</p> <nav class=md-post__action> <a href=2025/12/23/Ag2-logging-events/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/priyansh4320.png alt="Priyanshu Deshmukh"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-12-22 00:00:00+00:00">December 22, 2025</time></li> <li class=md-meta__item> in <a href=category/gpt-51/ class=md-meta__link>GPT-5.1</a>, <a href=category/apply-patch/ class=md-meta__link>Apply Patch</a>, <a href=category/code-editing/ class=md-meta__link>Code Editing</a>, <a href=category/responses-api/ class=md-meta__link>Responses API</a>, <a href=category/tools/ class=md-meta__link>Tools</a></li> <li class=md-meta__item> 10 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=gpt-51-apply-patch-tool-automated-code-editing-in-ag2><a href=2025/12/22/GPT-5.1-Apply-Patch-Tool/ class=toclink>GPT-5.1 Apply Patch Tool: Automated Code Editing in AG2</a></h2> <p>AG2 now supports the <strong>apply_patch</strong> tool (from GPT-5.1 onward) through OpenAI's Responses API, enabling agents to create, update, and delete files using structured diffs. This integration brings precise, controlled file operations directly into your agent workflows.</p> <p>This article explores how to use apply_patch in AG2, with practical examples for automated code editing, project scaffolding, and multi-file refactoring.</p> <h3 id=what-is-apply-patch><a class=toclink href=2025/12/22/GPT-5.1-Apply-Patch-Tool/#what-is-apply-patch>What is Apply Patch?</a></h3> <p>The <code>apply_patch</code> tool is a built-in capability in GPT-5.1 and above models that enables agents to perform structured file operations using unified diff format. Unlike traditional code generation approaches where agents output raw code blocks that you must manually integrate, apply_patch provides a standardized interface for file modifications that can be directly applied to your codebase.</p> <p>The tool handles three core operations: - <strong>create_file</strong>: Generate new files with specified content - <strong>update_file</strong>: Modify existing files using unified diff format - <strong>delete_file</strong>: Remove files from the workspace</p> <p><strong>Why Apply Patch Matters:</strong></p> <p>Traditional agent-based code generation often requires manual interventionâ€”you receive code blocks, review them, and manually integrate changes. Apply patch transforms this workflow by enabling agents to: - Make precise, targeted changes using diff format - Handle multi-file operations in a single interaction - Provide structured, reviewable changes before application - Support iterative refinement through feedback loops</p> <p><strong>When to use Apply Patch:</strong></p> <p>Use apply_patch when you need: - <strong>Multi-file refactoring</strong>: Renaming symbols, extracting helpers, or reorganizing modules across multiple files - <strong>Project scaffolding</strong>: Generating complete project structures with multiple files and directories - <strong>Iterative code improvement</strong>: Making incremental changes based on feedback or test results - <strong>Automated code fixes</strong>: Applying structured fixes to codebases based on linter output or error messages - <strong>Documentation and test generation</strong>: Creating test files, fixtures, and documentation alongside code changes</p> <p>Don't use apply_patch for simple, single-file code generation where direct code output is sufficientâ€”standard AG2 code generation patterns are more efficient for that.</p> <p>Note: AG2's apply_patch implementation integrates with OpenAI's Responses API. For protocol-level details, see <a href=https://platform.openai.com/docs/guides/tools-apply-patch>OpenAI's Apply Patch documentation</a>.</p> <nav class=md-post__action> <a href=2025/12/22/GPT-5.1-Apply-Patch-Tool/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/Lancetnik.png alt="Nikita Pastukhov"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-10-27 00:00:00+00:00">October 27, 2025</time></li> <li class=md-meta__item> in <a href=category/a2a/ class=md-meta__link>A2A</a>, <a href=category/distributed-agents/ class=md-meta__link>Distributed Agents</a>, <a href=category/interoperability/ class=md-meta__link>Interoperability</a></li> <li class=md-meta__item> 7 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=a2a-protocol-support-in-ag2-v010><a href=2025/10/27/A2A-Protocol-Support/ class=toclink>A2A Protocol Support in AG2 v0.10</a></h2> <p><img alt="AG2 Ã— A2A" src=2025-10-27-A2A-Protocol-Support/img/ag2-a2a-banner.png></p> <p>AG2 v0.10 introduces native support for the <a href=https://a2a-protocol.org/latest/ >Agent2Agent (A2A) Protocol</a>, enabling agents to communicate across different processes, frameworks, and languages through a standardized interface.</p> <p>This article walks through implementing A2A in AG2, with a focus on practical patterns for building distributed agent systems.</p> <h3 id=what-is-a2a><a class=toclink href=2025/10/27/A2A-Protocol-Support/#what-is-a2a>What is A2A?</a></h3> <p>A2A is a JSON-RPC 2.0 protocol over HTTP(S) for agent-to-agent communication. It provides a framework-agnostic interface that allows agents built with different tools (AG2, LangGraph, CrewAI, Semantic Kernel, Pydantic AI, etc.) to communicate without custom integration code.</p> <p>The protocol handles: - Task delegation and execution - Bidirectional communication between agents - Authentication and security - Observability and monitoring</p> <p><strong>When to use A2A:</strong></p> <p>Use A2A when you need to connect agents across: - Different processes or machines - Different teams or organizations - Different programming languages or frameworks - Services that require formal contracts between components</p> <p>Don't use A2A for simple in-process agent communicationâ€”standard AG2 patterns are more efficient for that.</p> <p>Note: AG2's A2A implementation uses the official <a href=https://github.com/a2aproject/a2a-python>A2A Python SDK</a>. Check their documentation for protocol-level details.</p> <nav class=md-post__action> <a href=2025/10/27/A2A-Protocol-Support/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/qingyun-wu.png alt="Qingyun Wu"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-09-23 00:00:00+00:00">September 23, 2025</time></li> <li class=md-meta__item> in <a href=category/hackathon/ class=md-meta__link>Hackathon</a>, <a href=category/community/ class=md-meta__link>Community</a></li> <li class=md-meta__item> 1 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=cascadia-ai-hackathon-winner-dino-park-meets-ag2><a href=2025/09/23/CascadiaAiHackathon/ class=toclink>Cascadia AI Hackathon Winner: Dino Park Meets AG2</a></h2> <h4 id=cascadia-ai-hackathon-winner-dino-park-meets-ag2_1><a class=toclink href=2025/09/23/CascadiaAiHackathon/#cascadia-ai-hackathon-winner-dino-park-meets-ag2_1><strong>Cascadia AI Hackathon Winner: Dino Park Meets AG2</strong></a></h4> <p><img alt="Pixelated dinosaurs" src=2025-09-23-CascadiaAiHackathon/img/pixelated_dinosaurs.png></p> <p>Last weekend at the Cascadia AI Hackathon in Seattle, developers showed off what's possible with multi-agent systems.</p> <p>The prize for Best Use of AG2 went to Jeff Linwood, who built a dinosaur park simulation game where rangers, guests, and even the dinosaurs themselves are represented as AI agents orchestrated in a swarm.</p> <p>Jeff reflected on the experience:</p> <p>"I got a chance to work on some fun tech and build out a ridiculous dinosaur-themed simulation game using AI-based NPCs. I ended up winning the prize for best use of the AG2 agentic framework!"</p> <p>We loved seeing AG2 power such a creative and playful project â€” and we're excited to see what else the open-source community will build next.</p> <p>ðŸ‘ Huge congrats Jeff, and thanks to Carter Rabasa and the Cascadia AI organizers for bringing this community together.</p> <p><img alt="Jeff presenting his project" src=2025-09-23-CascadiaAiHackathon/img/jeff_presenting.jpeg></p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/nipunsa102.png alt="Nipun Suwandaratna"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-06-12 00:00:00+00:00">June 12, 2025</time></li> <li class=md-meta__item> in <a href=category/react/ class=md-meta__link>ReAct</a>, <a href=category/reasoning/ class=md-meta__link>Reasoning</a></li> <li class=md-meta__item> 11 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=from-reasoning-to-evaluation-advanced-react-loops><a href=2025/06/12/ReAct-Loops-in-GroupChat/ class=toclink>From Reasoning to Evaluation: Advanced ReAct Loops</a></h2> <h4 id=from-reasoning-to-evaluation-advanced-react-loops-for-multi-agent-essay-evaluation><a class=toclink href=2025/06/12/ReAct-Loops-in-GroupChat/#from-reasoning-to-evaluation-advanced-react-loops-for-multi-agent-essay-evaluation><strong>From Reasoning to Evaluation: Advanced ReAct Loops for Multi-Agent Essay Evaluation</strong></a></h4> <p><a href=https://www.promptingguide.ai/techniques/react>ReAct</a> is a very powerful prompting technique in prompt engineering. The ability to Reason and then Act based on that reasoning (e.g. execute a tool call) and subsequently observe the result before proceeding to the next step gives engineers the flexibility to embed complex workflows by chaining multiple actions (and re-actions).</p> <p>ReAct Loops puts this on steroids by allowing the agent to iteratively perform a set of tasks while providing it with the autonomy to decide what to do next, and when to break out.</p> <p>However, implementing a reliable ReAct loop in a production environment can be challenging. The inherently non-deterministic nature of LLM outputs tends to be enhanced on occasion by the iterations that may in many cases produce wildly inaccurate outputs, or even never-ending loops that might result in massive, unexpected API costs.</p> <p>While there are several prompting strategies that enable the implementation of a successful ReAct loop, increasing complexity in production grade systems presents a challenge in finding the right balance between reliability and output quality, especially when dealing with complex and dynamic input variables (input variables that may change upon each iteration). This issue becomes even more pronounced when the workflow involves conversational agents, as the autonomy granted by frameworks for fully autonomous agents can limit a developer's ability to explicitly manipulate the loop, memory, or context.</p> <p>This eventually boils down to providing clear instructions for each agent for when to start or end execution.</p> <p>Enabling clear exit (break out of the loop) prompts take center stage in getting agents to know when it is time to break out.</p> <p>But when multiple agents are working, who should run the ReAct loop? Who decides when to break out? It might not be the same agent.</p> <p>This article explores a real-world multi-agent workflow designed to evaluate student essays, showcasing the implementation of advanced ReAct loops within a collaborative agentic system.</p> <p>We introduce a scenario in which a multi-agent system collaboratively evaluates student-submitted essays, using advanced ReAct loops to emulate nuanced grading behavior.</p> <p>For this we create the following agents:</p> <p><strong>Student (representative agent):</strong> An agent to represent the student (the student's essay), who can intelligently and descriptively answer questions by reading and understanding the essay's content.</p> <p><strong>Examiner</strong>: An examiner agent that evaluates student essays using a predefined set of grading criteria. In this example we implement this as a specific set of questions.</p> <p><strong>Evaluator</strong>: A scorer agent that evaluates the responses provided by the student representative to the examiner's questions, assesses them against the provided evaluation criteria, and determines a final score using a structured scoring rubric.</p> <p><strong>Group chat moderator</strong>: This is a framework requirement. This agent will moderate the group chat, but will not influence any of the logic executed within the system.</p> <p>The diagram below illustrates the architecture of the agentic workflow.</p> <p><img alt="Architecture: Multi-Agentic Collaborative Workflow" src=2025-06-12-ReAct-Loops-in-GroupChat/img/image3.png></p> <p>For each essay we initiate a new group chat</p> <p><strong>Note</strong>: Do not confuse the loop that runs for each essay with the ReAct loop. The ReAct loop runs within the group-chat for each evaluation.</p> <p><strong>But who should run the ReAct loop ?</strong></p> <p>You have several options here to experiment with. But what I've figured works well practically is when you allow the Examiner to run the loop, and leave the grading agent (Evaluator) as a silent observer until Prompted to Act (this we will cover next)</p> <p><strong>Note</strong>: If you provide a list of criteria or questions for the Examiner agent to run through, this tutorial demonstrates how to execute the process fully autonomously, trusting the agents to go through each of the questions in-order. However, please note that the reliability of this approach (i.e., whether the agent consistently addresses all questions) depends on how well the selected framework handles conversational context. Ultimately, the accuracy and completeness of the evaluation are best assessed at test time. For this tutorial, we're using AG2, and in our tests, it performed exactly as expected.</p> <p>We will not cover manual intervention in the loop where you programmatically inject the next question at each turn. Doing so would compromise the fully autonomous nature of the workflow. Additionally, such an approach may require direct manipulation of the Agent Scratchpad.</p> <p>Next we will see how to define each agent.</p> <p><strong>Student Agent</strong></p> <p></p><div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>system_message</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>"""You are an agent representing a student. You have access to the following essay content: </span><span class=si>{</span><span class=n>essay</span><span class=si>}</span><span class=s2>.</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=s2>    Your task is to answer questions about the essay strictly based on information found in the essay content.</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=s2>    Instructions:</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=s2>    Analysis of the essay</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=s2>    - Carefully analyze the essay for the following:</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=s2>    Does the essay meaningfully engage with ethical considerations?</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=s2>    Are issues like fairness, bias, equity, accessibility, or unintended consequences addressed?</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=s2>    Does the exploration consider multiple perspectives thoughtfully, or does it present a simplistic or biased viewpoint?</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=s2>    Answering questions from the examiner:</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=s2>    - Provide descriptive answers based on the essay Content,</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=s2>    - Use only the essay content. Do not fabricate or make up any answers or descriptions that do not reflect the essay Content.</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=s2>    - If you cannot find any information relevant to the question in the essay Content, simply say 'I cannot see that point being addressed in the essay'.</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=s2>    """</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>  <span class=n>agent</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>      <span class=n>name</span><span class=o>=</span><span class=s2>"Student"</span><span class=p>,</span> <span class=c1># You can derive the student name and assign it here as well, but there is an ethical consideration in doing so</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>      <span class=n>system_message</span><span class=o>=</span><span class=n>system_message</span><span class=p>,</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>      <span class=n>description</span><span class=o>=</span><span class=s2>"Student representative, answers questions based on a student essay"</span><span class=p>,</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>      <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config_gpt_4o</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>  <span class=p>)</span>
</code></pre></div> <strong>Examiner Agent:</strong><p></p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>examiner</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=n>name</span><span class=o>=</span><span class=s2>"Examiner"</span><span class=p>,</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=n>system_message</span><span class=o>=</span><span class=sa>f</span><span class=s2>"""I am an examiner who will cross examine an agent representing a student.</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=s2>    Thought:</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=s2>    I have a list of questions: </span><span class=si>{</span><span class=n>questions</span><span class=si>}</span><span class=s2> which I need to ask from the representative.</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=s2>    Actions:</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=s2>    - I will identify how many questions are there in the list of questions.</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=s2>    - I am going to ask all the question starting from the beginning, one-by-one in order.</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=s2>    - I will not skip any question, I will ask all the questions.</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=s2>    - I will stick to the original list of questions, I will not create new questions or modify any question.</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=s2>    Reflection:</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=s2>    - Have I asked all the questions?</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=s2>    - If the answer is yes, I will move on to the Next Section (Observation). If not, I will return back to the Actions Step and ask the next question in the questions list.</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=s2>    (This Thought/Action/Reflection can repeat n number of times, n being the number of questions in the list of questions. e.g: If there are 5 questions then n=5)</span>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=s2>    Observation:</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=s2>    - I have asked all the questions. I can now move on to the Output Section.</span>
<a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>
<a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a><span class=s2>    Output:</span>
<a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a><span class=s2>    - I MUST Conclude the examination by stating:</span>
<a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a><span class=s2>    "Examination Complete - [EVALUATOR_START]"</span>
<a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a><span class=s2>    - I will ensure that I state this phrase before ending the conversation.</span>
<a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a><span class=s2>    - Once I state this phrase, I will not engage in any further conversation.</span>
<a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>
<a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a><span class=s2>    """</span><span class=p>,</span>
<a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a>
<a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a>    <span class=n>description</span><span class=o>=</span><span class=s2>"Examiner, examine the essay using a list of questions that address a specific set of criteria."</span><span class=p>,</span>
<a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=s2>"EVALUATION-END"</span> <span class=ow>in</span> <span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"content"</span><span class=p>,</span> <span class=s2>""</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>""</span><span class=p>)</span><span class=o>.</span><span class=n>upper</span><span class=p>(),</span>
<a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>"NEVER"</span><span class=p>,</span>
<a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config_gpt_4o</span>
<a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a> <span class=p>)</span>
</code></pre></div> <p><strong>Evaluator Agent:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>evaluator</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>    <span class=n>name</span><span class=o>=</span><span class=s2>"Evaluator"</span><span class=p>,</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>    <span class=n>system_message</span><span class=o>=</span><span class=sa>f</span><span class=s2>"""You are an agent who evaluates a student essays based on an examination conducted between an examiner and a representative agent on behalf of a student.</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=s2>        During the examination:</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=s2>        - If you observe a direct question from the examiner to the representative, stay silent. Simply respond with "noted!"</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=s2>        - Once the examination has concluded, you will see the phrase:</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=s2>        "Examination Complete - [EVALUATOR_START]"</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=s2>        - Wait until you see this exact phrase. Once you see it, execute the following Actions/Steps, do not start your evaluation prematurely before you see the above phrase:</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=s2>        Actions:</span>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=s2>        Step 1: (evaluation)</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=s2>        - Based on the answers provided by the representative, evaluate the essay using the criteria: </span><span class=si>{</span><span class=n>evaluation_criteria</span><span class=si>}</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=s2>        - Evaluate how well the representativeâ€™s responses align with the criteria</span>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=s2>        - Be strict in the evaluation and only consider the information provided during the examination</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=s2>        Step 2: (scoring)</span>
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=s2>        - Compute a score on a scale of 100 based on your evaluation using the scoring rubric: </span><span class=si>{</span><span class=n>scoring_rubric</span><span class=si>}</span><span class=s2>.</span>
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=s2>        - Be strict with the calculation and only consider the information provided during the examination.</span>
<a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a><span class=s2>        - Only consider the content within the examiner and representative conversation when evaluating and scoring.</span>
<a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=s2>        - Provide a numeric value for the score. If you have no information at all to derive a score, provide a score of 0.</span>
<a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=s2>        - Treat all applicants across gender, ethnicity, and age equally.</span>
<a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>
<a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=s2>        response_format:</span>
<a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a><span class=s2>            ### EVALUATION-START ###</span>
<a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a><span class=s2>            ### evaluation-summary-start ### &lt;Detailed evaluation from 'Step 1: (evaluation)'&gt; ### evaluation-summary-end ###</span>
<a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a><span class=s2>            ### score-start ### &lt;numeric score calculated in 'Step 2: (scoring)'&gt; ### score-end ###</span>
<a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a><span class=s2>            ### EVALUATION-END ###</span>
<a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a>
<a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a><span class=s2>            Strictly adhere to the response format. Replace the placeholders with the actual values.</span>
<a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a>
<a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a><span class=s2>            """</span><span class=p>,</span>
<a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a>    <span class=n>description</span><span class=o>=</span><span class=s2>"Evaluator, Evaluates the essay based on the answers provided and the student"</span><span class=p>,</span>
<a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config_gpt_4o</span>
<a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a>  <span class=p>)</span>
</code></pre></div> <p>As you can see, there are <strong>template variables</strong> used within each prompt (e.g., {essay} for the Student Agent). These variables allow you to provide the necessary inputs dynamically.</p> <p>The values for these variables are typically defined before the prompt is executed. For example, <code>essay = getEssayContent()</code>, uses a function that retrieves the essay content from its source.</p> <p>This approach ensures the prompt receives the correct input at runtime.</p> <p><strong>Initiating the group chat</strong></p> <p>The following code snippet does 4 things</p> <ol> <li> <p>Defines the allowed transitionsâ€Š---â€Šthat is who can talk to who, and in which order</p> </li> <li> <p>Define the group chat</p> </li> <li> <p>Create a group chat manager agentâ€Š---â€ŠAll communications will route through this Agent in AG2</p> </li> <li> <p>Initiate the examination</p> </li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>allowed_transitions</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=n>examiner</span><span class=p>:</span> <span class=p>[</span><span class=n>student</span><span class=p>,</span> <span class=n>examiner</span><span class=p>],</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=n>student</span><span class=p>:</span> <span class=p>[</span><span class=n>examiner</span><span class=p>],</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=n>examiner</span><span class=p>:</span> <span class=p>[</span><span class=n>evaluator</span><span class=p>],</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=n>evaluator</span><span class=p>:</span> <span class=p>[]</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=p>}</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=n>group_chat</span> <span class=o>=</span> <span class=n>GroupChat</span><span class=p>(</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>    <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>examiner</span><span class=p>,</span> <span class=n>student</span><span class=p>,</span> <span class=n>evaluator</span><span class=p>],</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>    <span class=n>messages</span><span class=o>=</span><span class=p>[],</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>    <span class=n>max_round</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>    <span class=n>send_introductions</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>    <span class=n>allowed_or_disallowed_speaker_transitions</span><span class=o>=</span><span class=n>allowed_transitions</span><span class=p>,</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>    <span class=n>speaker_transitions_type</span><span class=o>=</span><span class=s2>"allowed"</span><span class=p>,</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=p>)</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=n>group_chat_manager</span> <span class=o>=</span> <span class=n>GroupChatManager</span><span class=p>(</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a>    <span class=n>name</span><span class=o>=</span><span class=s2>"Chat_Manager"</span><span class=p>,</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>    <span class=n>groupchat</span><span class=o>=</span><span class=n>group_chat</span><span class=p>,</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config_gpt_4o</span><span class=p>,</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=p>)</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=o>&lt;</span><span class=err>!</span><span class=o>--</span> <span class=n>more</span> <span class=o>--&gt;</span>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=c1># Start the examination</span>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=n>examination</span> <span class=o>=</span> <span class=n>examiner</span><span class=o>.</span><span class=n>initiate_chat</span><span class=p>(</span>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a>    <span class=n>group_chat_manager</span><span class=p>,</span>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a>    <span class=n>message</span><span class=o>=</span><span class=s2>"I am starting the examination"</span><span class=p>,</span>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a>    <span class=n>summary_method</span><span class=o>=</span><span class=n>my_summary_method</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=p>)</span>
</code></pre></div> <p>Note: allowed_transitions defines the agent communication pattern.</p> <p>Logic behind each step:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>examiner: [student, examiner]
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>Once the examiner asks a question the student answers, and the execution will then come back to the examiner
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>student: [examiner]
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>Student answers to the examiner
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>examiner: [evaluator]
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>Once done, the examiner hands it over to the evaluator
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>evaluator: []
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>No agent should execute after the evaluator
</code></pre></div> <p>In an ideal scenario the examination would conclude neatly after the evaluator agent provides the verdict.</p> <p>However, there are rare scenarios where the agents might fall into a conversation loop even after the evaluator has provided the final output.</p> <p>In such a scenario the <em>max_round</em> parameter will limit the communication to a pre-determined set of rounds (a round is one agent speaking). It is up to the programmer to decide how many max rounds the conversation might require based on the scenario.</p> <p>This has no harm (other than the occasional extra API calls). As you can see, the response format has clear place holders that allow you to programmatically extract the Evaluator output.</p> <p><strong>Running the Program</strong></p> <p>Essay Topic:</p> <p><strong>Balancing Efficiency, Equity, and Ethics: Should AI Grade Student Essays?</strong></p> <p>Sample Evaluation Criteria:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>Content-Based Focus Areas for Essay Evaluation
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>1. Ethical Insight &amp; Social Implications
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>What to Evaluate:
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>â€¢ Does the essay meaningfully engage with ethical considerations related to the topic?
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>â€¢ Are issues like fairness, bias, equity, accessibility, or unintended consequences addressed?
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>â€¢ Is the discussion nuanced, or does it reflect a shallow or one-sided ethical view?
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>Example in AI Essay Grading Context:
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>â€¢ Discusses risks of reinforcing language bias in underrepresented student groups.
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>â€¢ Considers transparency and fairness in algorithmic decision-making.
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>â€¢ Acknowledges ethical trade-offs between efficiency and pedagogical integrity.
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>2. Technical &amp; Practical Feasibility
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>What to Evaluate:
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>â€¢ Does the essay demonstrate understanding of the real-world implementation of the subject matter?
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>â€¢ Are technological capabilities, limitations, and infrastructure needs acknowledged?
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>â€¢ Does it address practical trade-offs, such as cost, deployment, and human oversight?
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>Example in AI Essay Grading Context:
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>â€¢ Mentions how NLP models are trained and where they typically fail.
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>â€¢ Discusses real-world examples (e.g., ETS e-rater, Turnitin, GPT models in education).
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>â€¢ Proposes reasonable implementation methods (e.g., AI as first-pass grader).
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>Educational &amp; Pedagogical Impact
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>What to Evaluate:
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>â€¢ How well does the essay explore the impact of the topic on learning processes, student agency, teacher roles, or educational philosophy?
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>â€¢ Does it examine potential changes to curriculum, assessment goals, or learning equity?
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>â€¢ Are long-term educational outcomes considered?
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>Example in AI Essay Grading Context:
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>â€¢ Considers how AI feedback might deskill educators or reduce critical thinking in students.
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>â€¢ Explores whether automated grading could shift classroom priorities toward test optimization.
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>â€¢ Suggests how AI could be used to enrich pedagogy without undermining teacher judgment.
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a>(AI generated content)
</code></pre></div> <p>Sample Scoring Rubric that uses a weighted scoring mechanism:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>Dimensions and Scoring Adjustments:
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>1. Problem Understanding (PU)
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>o Assess whether the student identifies the primary issue AI aims to solve (efficiency, consistency, accessibility).
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>o Higher scores for recognizing multiple dimensions and contextualizing the problem in real-world educational settings.
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>2. Ethical Insight (EI)
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>o Evaluate how well the essay engages with ethical concerns, such as fairness, bias, transparency, and inclusivity.
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>o Essays with nuanced, multi-perspective analysis of these concerns will be scored higher.
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>3. Solution Proposal (SP)
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>o Examine the quality and clarity of the proposed solution (e.g., hybrid human-AI model).
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>o Stronger scores for realistic, balanced, and well-justified alternatives to full automation.
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>4. Educational Impact (ED)
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>o Determine how thoroughly the essay discusses the pedagogical consequences of AI on teachers, students, and learning processes.
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>o High-scoring essays provide thoughtful analysis of classroom dynamics, teacher agency, and long-term outcomes.
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>5. Argument Balance (BA)
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>o Check whether the essay presents a fair and well-rounded view of both pros and cons.
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>o Balanced treatment with critical evaluation of opposing views scores higher.
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a>Weighted Scoring:
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a>Each category will be weighted as follows to reflect its relevance in assessing essay depth and insight:
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a>
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>Score = (PU Ã— 0.20) + (EI Ã— 0.25) + (SP Ã— 0.20) + (ED Ã— 0.20) + (BA Ã— 0.15)
<a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a>
<a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a>(Weights prioritize ethical reasoning and solution quality while ensuring holistic evaluation.)
</code></pre></div> <p>Agent Communication Log (<em>this is </em><em>actual output</em><em>, not mock-ups</em>):</p> <p><img alt src=2025-06-12-ReAct-Loops-in-GroupChat/img/image2.png> <img alt src=2025-06-12-ReAct-Loops-in-GroupChat/img/image4.png> <img alt src=2025-06-12-ReAct-Loops-in-GroupChat/img/image1.png></p> <p>As you can see the Evaluator has provided an Evaluation Summary as we've instructed along with a score of 68 for this particular essay <em>(essay content not attached)</em></p> <p><strong>So, why use this approach instead of simply having a single agent evaluate based on the predefined criteria and scoring rubric?</strong></p> <p><strong>The answer is granularity.</strong></p> <p>This method offers greater flexibility by allowing you to steer the evaluation using targeted questions, while still adhering to the overall evaluation criteria and scoring rubric.</p> <p>In other words, if you want to use the same set of essays to identify (or reward more highly) students who address specific topics or concerns, this approach ensures those aspects are captured through the question-answer process. This reduces the risk of such contributions being overlooked in a generic evaluation based solely on broad criteria.</p> <p>Of course, the <strong>accuracy of the evaluation</strong> in such cases will depend not only on the evaluation criteria and scoring rubric, but also on the <strong>design and relevance of the questions</strong> themselves.</p> <p>I hope this has given you a practical understanding of how to set up conversational agents to collaborate effectively within the scope of a ReAct loop.</p> <p>For information on how to deploy such a long running agentic workflow to an Azure environment, check out my post <a href=https://medium.com/agentloop/deploying-long-running-multi-agentic-workflows-on-azure-triggered-asynchronously-via-copilot-agents-221c417d0766>Deploying Long-Running Multi-Agentic Workflows on Azure Triggered Asynchronously via Copilot</a>.</p> </div> </article> <nav class=md-pagination> <span class=md-pagination__current>1</span> <a href=page/2/ class=md-pagination__link>2</a> <a href=page/3/ class=md-pagination__link>3</a> <span class=md-pagination__dots>..</span> <a href=page/6/ class=md-pagination__link>6</a> </nav> </div> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../community-talks/2025-04-10-NOVA/ class="md-footer__link md-footer__link--prev" aria-label="Previous: NOVA: Building Agentic Workflows for Structured Data Intelligence at Nexla"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> NOVA: Building Agentic Workflows for Structured Data Intelligence at Nexla </div> </div> </a> <a href=category/a2a/ class="md-footer__link md-footer__link--next" aria-label="Next: A2A"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> A2A </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Â© 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"></path></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"></path></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"></path></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"></path></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> <script src=../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>